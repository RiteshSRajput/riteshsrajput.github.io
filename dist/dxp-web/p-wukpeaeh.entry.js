import{r as t,c as s,d as i,h as e,g as a}from"./p-8188e849.js";import{B as h}from"./p-16d6f0ca.js";import{m as d}from"./p-55c24ce5.js";const r=class{constructor(i){t(this,i),this.displayAs="star",this.analyticsDataEmitter=s(this,"dxp_feedback",7),this.emitfeedback=s(this,"emitfeedback",7),this.radioFeedback=s(this,"radioFeedback",7),this.starFeedback=s(this,"starFeedback",7)}componentWillLoad(){this.base=new h(this,i),this.base.i18Init(i,"Feedback",d),this.configData&&"string"==typeof this.configData&&(this.configData=JSON.parse(this.configData));const t=this.element;let s="";i.util.appendLinkElement(t,s),i.util.appendLinkElement(t,s=""),s=`${i.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-feedback.min.css`,i.util.appendLinkElement(t,s)}dropdownChange(t){this.dropdownValSelected=t.target.value,this.emitAnalyticsData("Dropdown Feedback",this.dropdownValSelected),this.emitfeedback.emit({feedbackValue:this.dropdownValSelected,feedbackId:this.feedbackId})}emitAnalyticsData(t,s){this.analyticsDataEmitter.emit({di_comp_name:this.element.tagName,di_comp_type:t,di_comp_value:s})}handleKeypressEvents(t){13===t.keyCode&&this.handleStarRating(t)}handleRadio(t){this.radioValue=t.target.id,this.emitAnalyticsData("Radio Feedback",this.radioValue),this.emitfeedback.emit({feedbackValue:this.radioValue,feedbackId:this.feedbackId})}handleStarRating(t){this.selectedIndex=t.target.getAttribute("custom-id")?t.target.getAttribute("custom-id"):void 0,this.starValue=Number(this.selectedIndex)+1,this.emitfeedback.emit({feedbackValue:this.starValue,feedbackId:this.feedbackId})}renderStars(){const t=[];for(let s=0;s<this.starCount;s++){const a=s+1;t.push(e("span",{role:"radio","aria-checked":`${this.selectedIndex>=0&&s<=this.selectedIndex?"true":"false"}`,class:`${this.selectedIndex>=0&&s<=this.selectedIndex?"active":""}`,tabindex:"0","aria-label":this.selectedIndex>=0&&s<=this.selectedIndex?`${i.i18n.t("Feedback:starSelected",{starcount:this.starCount,stars:a})}`:`${i.i18n.t("Feedback:starNotSelected",{starcount:this.starCount,stars:a})}`,"custom-id":s,"tag-name":"dxp-star",onKeyPress:t=>this.handleKeypressEvents(t),onClick:t=>this.handleStarRating(t)}))}return t}render(){return e("div",{class:`container ${this.base.componentClass()}`,dir:this.dir},e("div",{class:"feedback-item"},"star"===this.displayAs.trim().toLowerCase()&&e("div",{class:"rating"},this.feedbackRatingTitle&&this.feedbackRatingTitle.length>0&&e("div",null,this.feedbackRatingTitle),this.renderStars()),"dropdown"===this.displayAs.trim().toLowerCase()&&this.displayAs&&e("div",{class:"dropdown-wrapper"},this.feedbackRatingTitle&&this.feedbackRatingTitle.length>0&&e("div",null,this.feedbackRatingTitle),e("select",{class:"dropdown",onChange:t=>this.dropdownChange(t)},e("option",{value:""}," ",this.placeholder),this.configData.map(t=>e("option",{value:t.key},t.key)))),"radio"===this.displayAs.trim().toLowerCase()&&this.displayAs&&e("div",{class:"radio-wrapper"},e("dxp-radio-group",{label:this.feedbackRatingTitle},this.configData.map(t=>e("dxp-radio-button",{tabindex:"0","radio-key":t.key,"radio-value":t.value,onChange:t=>this.handleRadio(t)}))))))}get element(){return a(this)}static get style(){return"div.dxp.dxp-feedback-item .rating{margin-bottom:1rem}div.dxp.dxp-feedback-item .rating span{margin:.5rem .2rem;cursor:pointer}div.dxp.dxp-feedback-item .rating h4,div.dxp.dxp-feedback-item .rating h6{margin-bottom:0}div.dxp.dxp-feedback-item .dropdown-wrapper,div.dxp.dxp-feedback-item .radio-wrapper{margin-bottom:1rem;width:100%}div.dxp.dxp-feedback-item .select-tiltle{margin-bottom:.75rem}div.dxp.dxp-feedback-item .textarea-wrapper{margin-top:.75rem}"}};export{r as dxp_feedback_item};