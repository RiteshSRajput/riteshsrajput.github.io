import{r as t,d as s,h as e,g as i}from"./p-8188e849.js";import{B as r}from"./p-16d6f0ca.js";import{m as h}from"./p-3eebf77a.js";const n=class{constructor(s){t(this,s),this.stepCount=1,this.userDataContainer="COOKIE"}commentChangeHandler(t){this.comments="string"==typeof t?JSON.parse(t):t}componentWillLoad(){this.base=new r(this,s),this.base.i18Init(s,"CommentsWithReply",h),this.comments="string"==typeof this.commentObj?JSON.parse(this.commentObj):this.commentObj,this.showReplySection=!1}submitHandler(t){"load-more-replies"===t.target.getAttribute("btn-id")&&this.stepCount++}async updateCommentObj(t){"reply"===t.detail.action&&(this.showReplySection=!0)}renderList(t){return this.lastIndex=this.repliesLimit*this.stepCount,t.slice(0,this.lastIndex).map(t=>e("dxp-comments-item",{"is-reply":"true","max-characters":this.maxCharacters,"user-data-container":this.userDataContainer,"userid-key":this.useridKey,"comment-obj":JSON.stringify(t)}))}render(){return s.log.debug(this.element.tagName,"render()","in dxp-comments-with-reply render() : DEVELOPMENT"),e("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},e("dxp-comments-item",{"is-reply":"false","max-characters":this.maxCharacters,"user-data-container":this.userDataContainer,"userid-key":this.useridKey,"comment-obj":JSON.stringify(this.comments)}),this.comments&&this.comments.replies.length?e("div",{class:"option-wrapper"},e("a",{href:"javascript : void(0)","btn-id":"show-all-replies",class:this.showReplySection?"hide-link":"show-link",onClick:t=>{t.preventDefault(),this.showReplySection=!this.showReplySection}},s.i18n.t(this.showReplySection?"CommentsWithReply:hideTxt":"CommentsWithReply:showTxt",{repliesCount:this.comments.replies.length}),e("i",{class:"caret-icon"}))):"",this.showReplySection?e("div",{class:"reply-section is-visible"},this.renderList(this.comments.replies),this.lastIndex<this.comments.replies.length&&e("dxp-cta",{type:"button","button-type":"secondary","btn-id":"load-more-replies",text:s.i18n.t("CommentsWithReply:loadmoreReplies"),onClick:t=>this.submitHandler(t)})):"",e("div",{class:"dxp-clear-fix"}))}get element(){return i(this)}static get watchers(){return{commentObj:["commentChangeHandler"]}}static get style(){return"div.dxp.dxp-comments-with-reply{margin:.5rem 0 1.75rem}div.dxp.dxp-comments-with-reply .reply-section{margin-left:4rem;display:none;-webkit-transition:all .5s ease-in;transition:all .5s ease-in}div.dxp.dxp-comments-with-reply .reply-section.is-visible{display:block}\@media (max-width:576px){div.dxp.dxp-comments-with-reply .reply-section{margin-left:2rem}}div.dxp.dxp-comments-with-reply .option-wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row-reverse;flex-direction:row-reverse}div.dxp.dxp-comments-with-reply .option-wrapper a{display:-ms-flexbox;display:flex}div.dxp.dxp-comments-with-reply .option-wrapper a:hover{text-decoration:underline}div.dxp.dxp-comments-with-reply .option-wrapper a .caret-icon{width:1rem;display:inline-block;margin-left:.75rem;-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear}div.dxp.dxp-comments-with-reply .option-wrapper a.hide-link .caret-icon{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}div.dxp.dxp-comments-with-reply .action-link{display:block;padding:.25rem 1.25rem;-webkit-transition:color,background-color .15s ease-in;transition:color,background-color .15s ease-in}div.dxp.dxp-comments-with-reply[dir=rtl] .reply-section{margin-left:0;margin-right:4rem}\@media (max-width:576px){div.dxp.dxp-comments-with-reply[dir=rtl] .reply-section{margin-left:0;margin-right:2rem}}div.dxp.dxp-comments-with-reply[dir=rtl] .option-wrapper a .caret-icon{margin-right:.75rem;margin-left:0}"}};export{n as dxp_comments_with_reply};