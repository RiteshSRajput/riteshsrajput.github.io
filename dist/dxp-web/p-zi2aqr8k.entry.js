import{r as t,d as s,h as i,g as e}from"./p-8188e849.js";import{B as n}from"./p-16d6f0ca.js";const r={en:{months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds",milliseconds:"Milliseconds",stop:"Stop",start:"Start",reset:"Reset",minUnitError:"Please select minimum unit less than or equal to selected maximum unit.",invalidDateError:"Please enter date in valid ISO 8601 standard format (YYYY-MM-DDThh:mm:ssTZD)."},"en-US":{months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds",milliseconds:"Milliseconds",stop:"Stop",start:"Start",reset:"Reset",minUnitError:"Please select minimum unit less than or equal to selected maximum unit.",invalidDateError:"Please enter date in valid ISO 8601 standard format (YYYY-MM-DDThh:mm:ssTZD)."},es:{months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos",milliseconds:"Milisegundas",stop:"Detener",start:"comienzo",reset:"Reiniciar",minUnitError:"Seleccione la unidad mínima menor o igual a la unidad máxima seleccionada.",invalidDateError:"Ingrese la fecha en un formato estándar ISO 8601 válido (AAAA-MM-DDThh: mm: ssTZD)."},"es-ES":{months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos",milliseconds:"Milisegundas",stop:"Detener",start:"comienzo",reset:"Reiniciar",minUnitError:"Seleccione la unidad mínima menor o igual a la unidad máxima seleccionada.",invalidDateError:"Ingrese la fecha en un formato estándar ISO 8601 válido (AAAA-MM-DDThh: mm: ssTZD)."}},h=class{constructor(s){t(this,s),this.showError=!1,this.timeUnitList=["months","days","hours","minutes","seconds","milliseconds"],this.displayDirection="horizontal",this.maxUnit="days",this.minUnit="milliseconds",this.stopAtZero=!0,this.timerSize="small",this.timerType="countdown"}componentWillLoad(){this.base=new n(this,s),this.base.i18Init(s,"Timer",r),this.timeCounter={},this.timerStart=s.moment.utc(),this.timerEnd="countdown"===this.timerType?s.moment.parseZone(this.endTime).utc():s.moment.utc().clone(),this.timeUnitList.indexOf(this.minUnit)<this.timeUnitList.indexOf(this.maxUnit)?(this.errorMsg=s.i18n.t("Timer:minUnitError"),this.showError=!0):(this.selectedUnitRange=this.timeUnitList.slice(this.timeUnitList.indexOf(this.maxUnit),this.timeUnitList.indexOf(this.minUnit)+1),this.durationDiff=s.moment.duration(Object.assign({},this.resetTimeCounter())),"stopwatch"===this.timerType?this.onReset():s.moment.utc(this.endTime).isValid()?this.setTimeCounter():(this.errorMsg=s.i18n.t("Timer:invalidDateError"),this.showError=!0))}componentDidLoad(){"stopwatch"!==this.timerType&&this.startTimerInterval()}routingHandler(t){this.base.routingEventListener(t)}onReset(){this.timeCounter=Object.assign({},this.resetTimeCounter()),this.duration=s.moment.duration(Object.assign({},this.resetTimeCounter())).clone(),this.buttonText=s.i18n.t("Timer:start"),this.buttonTitle="start",clearInterval(this.timerInterval)}onStart(t){"stop"===t.currentTarget.getAttribute("btn-title")?(clearInterval(this.timerInterval),this.buttonText=s.i18n.t("Timer:start"),this.buttonTitle="start"):(this.timerEnd=s.moment.utc().clone(),this.timerStart=s.moment.utc(),this.durationDiff=this.duration,this.startTimerInterval(),this.buttonText=s.i18n.t("Timer:stop"),this.buttonTitle="stop")}resetTimeCounter(){const t={};for(const s of this.selectedUnitRange)t[s]=0;return t}setTimeCounter(){this.timerStart=s.moment.utc().clone();const t="countdown"===this.timerType?s.moment.utc(this.timerEnd).isSameOrAfter(this.timerStart):s.moment.utc(this.timerStart).isSameOrAfter(this.timerEnd);let i={};if(!this.stopAtZero||t){this.duration="countdown"===this.timerType?s.moment.duration(this.timerEnd.diff(this.timerStart)):s.moment.duration(this.timerStart.diff(this.timerEnd)).add(this.durationDiff);for(const s of this.selectedUnitRange)i[s]=s===this.maxUnit?t?Math.floor(this.duration.as(s)):Math.ceil(this.duration.as(s)):this.duration.get(s)}else i=this.resetTimeCounter(),clearInterval(this.timerInterval);this.timeCounter=Object.assign({},i)}startTimerInterval(){this.timerInterval=setInterval(()=>{this.setTimeCounter()},s.moment.duration(1,this.minUnit).asMilliseconds())}render(){s.log.debug(this.element.tagName,"render()","in dxp-timer render() : DEVELOPMENT");const t=[i("link",{rel:"stylesheet",type:"text/css",href:""}),[this.theme&&i("link",{rel:"stylesheet",href:""})],[this.theme&&i("link",{rel:"stylesheet",href:`${s.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-timer.min.css`})]];return i("div",{class:`${this.base.componentClass()}`,dir:this.dir,"data-theme":this.theme},t,i("div",{class:`${this.displayDirection} ${this.timerSize}`},this.showError?i("div",{class:"unit-wrapper error-msg"},this.errorMsg):Object.keys(this.timeCounter).map(t=>i("div",{class:"unit-wrapper"},i("div",{class:"unit-count"},this.timeCounter[t]),i("div",{class:"unit-label"},s.i18n.t(`Timer:${t}`))))),"stopwatch"!==this.timerType||this.showError?"":i("div",{class:`${this.displayDirection}`},i("dxp-cta",{type:"button","btn-title":this.buttonTitle,"button-type":"secondary",text:this.buttonText,onClick:t=>this.onStart(t)}),i("dxp-cta",{type:"button","btn-title":"reset-button","button-type":"secondary",text:s.i18n.t("Timer:reset"),onClick:()=>this.onReset()})))}get element(){return e(this)}static get style(){return"div.dxp.dxp-timer{-ms-flex-direction:column;flex-direction:column}div.dxp.dxp-timer,div.dxp.dxp-timer .horizontal,div.dxp.dxp-timer .vertical{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap}div.dxp.dxp-timer .horizontal,div.dxp.dxp-timer .vertical{padding:.16rem}div.dxp.dxp-timer .horizontal dxp-cta:not(:first-child){padding-left:.5rem}div.dxp.dxp-timer .vertical{-ms-flex-direction:column;flex-direction:column}div.dxp.dxp-timer .vertical dxp-cta:not(:first-child){padding-top:.5rem}div.dxp.dxp-timer .unit-wrapper{-ms-flex:1 1 auto;flex:1 1 auto;text-align:center;min-width:4rem;margin:.16rem;padding:.25rem .5rem}div.dxp.dxp-timer .unit-wrapper.error-msg{width:20rem}div.dxp.dxp-timer .large{padding:.25rem}div.dxp.dxp-timer .large .unit-wrapper{margin:.25rem;min-width:6rem;padding:.75rem 1.5rem}\@media (max-width:767px){div.dxp.dxp-timer{padding:.1rem}div.dxp.dxp-timer .unit-wrapper{min-width:3rem;margin:.1rem;padding:.1rem .3rem}div.dxp.dxp-timer .large{padding:.25rem}div.dxp.dxp-timer .large .unit-wrapper{margin:.25rem;min-width:4rem;padding:.5rem 1.2rem}}"}};export{h as dxp_timer};