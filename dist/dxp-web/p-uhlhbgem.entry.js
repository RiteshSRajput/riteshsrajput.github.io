import{r as t,d as s,h as e,g as i}from"./p-8188e849.js";import{B as h}from"./p-16d6f0ca.js";const a={en:{alt:"Logo Image",nextbtnlabel:"Move to next tweet",previousbtnlabel:"Move to previous tweet"},es:{alt:"Logo Image",nextbtnlabel:"Move to next tweet",previousbtnlabel:"Move to previous tweet"}},n=class{constructor(s){t(this,s),this.currentTweetIndex=0,this.twitterUrl="https://twitter.com/"}async componentWillLoad(){let t,e;this.base=new h(this,s),this.base.i18Init(s,"TwitterBanner",a),this.tweetJsonUrl=this.getTweetUrl(this.handleType),this.tweets=await this.getTweets(),this.maxCount||(this.maxCount=this.tweets&&this.tweets.length),this.tweets&&this.tweets.length?(this.maxCount>this.tweets.length&&(this.maxCount=this.tweets.length),this.currentName=this.tweets[this.currentTweetIndex].userName,this.tweets.forEach(s=>{(t=s.formattedTwitterText.match(/#[a-z\d]+/gi))&&t.forEach((i,h)=>{e=new RegExp(t[h],"g"),i=i.replace("#","<span class='dxp-sr-only'>hashtag</span><span aria-hidden=\"true\">#</span>"),s.formattedTwitterText=s.formattedTwitterText.replace(e,`${i}`)})})):s.log.error(this.element.tagName,"componentWillLoad()","Please check entered Handle")}async componentDidLoad(){this.tweets&&this.tweets.length&&(this.element.querySelectorAll(".slides")[0].classList.remove("dxp-none"),Array.from(this.element.querySelectorAll(".slides a")).forEach(t=>{t.classList.add("sc-dxp-twitter-banner")}))}routingHandler(t){this.base.routingEventListener(t)}appendHashtags(t){return this.hashtag=this.handle.split(","),this.hashtag.forEach((t,s,e)=>{t=t.trim(),e[s]=t.startsWith("#")?t:`#${t}`}),t+this.hashtag.join()}async getTweets(){try{return this.tweetJsonUrl=this.tweetJsonUrl&&this.tweetJsonUrl.replace(/#/g,""),await s.api(this.tweetJsonUrl)}catch(t){s.log.error(`fetch failed for ${this.tweetJsonUrl}`,t)}}getTweetUrl(t){let s="";const e=t&&t.toLowerCase();return s=this.twitterApiEndPoint+{screenname:"timeline?screenName=",hashtag:"hashtag?hashtag="}[e],s="hashtag"===e?this.appendHashtags(s):s+this.handle,this.maxCount&&(s=`${s}&count=${this.maxCount}`),s}nextTweet(){this.element&&this.element&&this.element.querySelectorAll(".slides")[this.currentTweetIndex].classList.add("dxp-none"),this.currentTweetIndex===this.maxCount-1&&(this.currentTweetIndex=-1),this.currentTweetIndex=this.currentTweetIndex+1,this.setTweetAndScreenName(this.currentTweetIndex)}prevTweet(){this.element&&this.element&&this.element.querySelectorAll(".slides")[this.currentTweetIndex].classList.add("dxp-none"),0===this.currentTweetIndex&&(this.currentTweetIndex=this.maxCount),this.currentTweetIndex=this.currentTweetIndex-1,this.setTweetAndScreenName(this.currentTweetIndex)}setTweetAndScreenName(t){this.element&&this.element&&(this.element.querySelectorAll(".slides")[this.currentTweetIndex].classList.remove("dxp-none"),this.element.querySelectorAll(".slides")[this.currentTweetIndex].classList.add("fade")),this.currentName=this.tweets[t].userName,this.currentTweet=this.tweets[t].formattedTwitterText}render(){s.log.debug(this.element.tagName,"render()","in dxp-twitter-banner render() : DEVELOPMENT");const t=[e("link",{rel:"stylesheet",href:""}),[this.theme&&e("link",{rel:"stylesheet",href:""})],[this.theme&&e("link",{rel:"stylesheet",href:`${s.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-twitter-banner.min.css`})]];return e("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,e("div",{class:"dxp-row"},e("div",{class:"dxp-col-xl-12 twitter-carousel"},e("div",{class:"dxp-col-md-12 dxp-col-sm-10 dxp-col-9"},e("p",{class:"dxp-col-push-lg-1 dxp-col-lg-11 dxp-col-push-md-2 dxp-col-md-10 dxp-push-col-0 logo-wrapper"},e("a",{"aria-haspopup":this.target?"true":void 0,class:"twitter-logo-link",href:`${this.twitterUrl}${this.currentName?this.currentName.replace(/\s/g,""):""}#`,target:this.target},e("img",{title:s.i18n.t("TwitterBanner:alt"),class:"twitter-logo",src:this.src,alt:s.i18n.t("TwitterBanner:alt")})),e("a",{"aria-label":`@${this.currentName}`,"aria-haspopup":this.target?"true":void 0,class:"twitter-link",href:`${this.twitterUrl}${this.currentName?this.currentName.replace(/\s/g,""):""}`,target:this.target},"@",this.currentName))),e("div",{class:"dxp-col-lg-1 dxp-col-sm-2 dxp-col-3"},e("p",{class:"btn-wrapper"},e("button",{title:s.i18n.t("TwitterBanner:previousbtnlabel"),onClick:()=>{this.prevTweet()}},e("span",{class:"prev prev-icon"})),e("button",{title:s.i18n.t("TwitterBanner:nextbtnlabel"),onClick:()=>{this.nextTweet()}},e("span",{class:"next next-icon"})))),e("div",{class:"dxp-col-lg-11 dxp-col-md-10 dxp-col-12"},e("ul",{class:"slideshow-container"},this.tweets&&this.tweets.length?this.tweets.map(t=>e("li",{class:"slides h5 dxp-none",innerHTML:t.formattedTwitterText})):"")))))}get element(){return i(this)}static get style(){return"div.dxp.dxp-twitter-banner .twitter-logo-link{padding-right:0;display:block}div.dxp.dxp-twitter-banner .twitter-carousel .slides{font-size:21px;line-height:32px}div.dxp.dxp-twitter-banner .twitter-carousel .slides.fade{-webkit-animation-name:fadein;animation-name:fadein;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}div.dxp.dxp-twitter-banner .twitter-carousel .slides a{word-wrap:break-word;text-decoration:none;padding:0;margin:0;font-size:21px;line-height:32px}div.dxp.dxp-twitter-banner .twitter-carousel .slides a:after,div.dxp.dxp-twitter-banner .twitter-carousel .slides a:before,div.dxp.dxp-twitter-banner .twitter-carousel .slides a:hover:after,div.dxp.dxp-twitter-banner .twitter-carousel .slides a:hover:before{background:none}div.dxp.dxp-twitter-banner .twitter-carousel .logo-wrapper{padding:0}div.dxp.dxp-twitter-banner .twitter-carousel .logo-wrapper a{-ms-flex-item-align:center;align-self:center;margin:0}div.dxp.dxp-twitter-banner .twitter-carousel .logo-wrapper a:last-child{display:inline-block;margin-top:16px}div.dxp.dxp-twitter-banner .twitter-carousel .logo-wrapper .twitter-logo{height:64px;width:64px;display:block}div.dxp.dxp-twitter-banner .twitter-carousel .logo-wrapper .btn-link{display:block;margin-top:16px}div.dxp.dxp-twitter-banner .twitter-carousel .next{cursor:pointer;height:32px;width:16px;background-size:100%;float:right}div.dxp.dxp-twitter-banner .twitter-carousel .prev{cursor:pointer;height:32px;width:16px;background-size:100%;float:left}div.dxp.dxp-twitter-banner .twitter-carousel .btn-wrapper{margin-top:12px;padding-right:15px}div.dxp.dxp-twitter-banner .twitter-carousel .btn-wrapper button{display:inline-block;width:50%;background-color:transparent;border:none}\@media (min-width:768px){div.dxp.dxp-twitter-banner .twitter-carousel .slides,div.dxp.dxp-twitter-banner .twitter-carousel .slides a{font-size:30px;line-height:48px}}\@media (min-width:576px){div.dxp.dxp-twitter-banner .logo-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}div.dxp.dxp-twitter-banner .logo-wrapper .twitter-link{padding-left:24px}div.dxp.dxp-twitter-banner .logo-wrapper a:last-child{margin-top:0}}\@-webkit-keyframes fadein{0%{opacity:0}to{opacity:1}}\@keyframes fadein{0%{opacity:0}to{opacity:1}}div.dxp.dxp-twitter-banner[dir=rtl] .twitter-carousel .prev{float:right}div.dxp.dxp-twitter-banner[dir=rtl] .twitter-carousel .next{float:left}div.dxp.dxp-twitter-banner[dir=rtl] .twitter-carousel .btn-wrapper{padding-right:0;padding-left:15px}div.dxp.dxp-twitter-banner[dir=rtl] .logo-wrapper .twitter-link{padding-left:32px}\@media (min-width:576px){div.dxp.dxp-twitter-banner[dir=rtl] .logo-wrapper .twitter-link{padding-right:24px;padding-left:32px}}\@media (max-width:991px){div.dxp.dxp-twitter-banner[dir=rtl] .twitter-carousel>div:first-child p{left:0}}"}};export{n as dxp_twitter_banner};