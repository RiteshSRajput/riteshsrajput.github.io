import{r as t,d as e,h as s,g as i}from"./p-8188e849.js";import{B as c}from"./p-16d6f0ca.js";import{m as l}from"./p-ece12894.js";const o=class{constructor(e){t(this,e),this.childElementCount=0,this.heading="",this.isHeaderRequired=!0}accordionChangeHandler(){this.base.createNestedMarkup(this.accItemContainer,"dxp-accordion",this.items)}componentWillLoad(){this.base=new c(this,e),this.base.i18Init(e,"Accordion",l),this.items&&"string"==typeof this.items&&(this.items=JSON.parse(this.items))}componentDidLoad(){if(this.items){const t=this.element.querySelectorAll(".expand-all"),e=this.element.querySelectorAll(".collapse-all");this.expandAndCollapse(this.element,t,e)}this.element.querySelectorAll("dxp-accordion-item")&&this.element.querySelectorAll("dxp-accordion-item");const t=this.element.querySelectorAll("dxp-accordion-item"),e=t[t.length-1];e&&e&&e.querySelector(".acc-label").classList.add("acc-bottom"),t&&t.length>0&&(this.childElementCount=t.length)}componentDidUpdate(){const t=this.element.querySelectorAll(".expand-all"),e=this.element.querySelectorAll(".collapse-all");this.expandAndCollapse(this.element,t,e)}expandCollapse(t){const e=this.getElementsByClass(".acc-label"),s=Array.prototype.slice.call(e);let i,c,l;const o=t.keyCode;if(c=t.target?t.target.activeElement:t.target,[32,38,40].indexOf(t.keyCode)>-1&&t.preventDefault(),9===o&&c.classList.remove("dxp-no-outline"),i=this.getElementsByClass(".acc-content"),l=this.getElementsByClass(".acc-label"),c.classList.contains("expand-all")&&(32===o||13===o))for(let a=0;a<l.length;a++)l[a].classList.add("active"),l[a].parentElement.classList.add("acc-item-select"),i[a].classList.remove("dxp-none"),i[a].style.maxHeight=`${i[a].scrollHeight+i[a].offsetHeight}px`;!c.classList.contains("collapse-all")||32!==o&&13!==o||this.collapseAll(s,l,i)}routingHandler(t){this.base.routingEventListener(t)}collapseAll(t,e,s){for(let i=0;i<t.length;i++)t[i].classList.remove("active"),s[i]&&(s[i].removeAttribute("style"),e[i].parentElement.classList.remove("acc-item-select"),e[i].classList.remove("active"),s[i].classList.add("dxp-none"))}expandAndCollapse(t,e,s){let i,c;if(t&&t.querySelectorAll(".toggle"))for(let l=0;l<e.length;l++)e[l].addEventListener("click",()=>{i=this.getElementsByClass(".acc-content"),c=this.getElementsByClass(".acc-label");for(let t=0;t<i.length;t+=1)c[t].parentElement.classList.add("acc-item-select"),c[t].classList.add("active"),i[t].classList.remove("dxp-none"),i[t].style.maxHeight=`${i[t].scrollHeight+i[t].offsetHeight}px`}),s[l].addEventListener("click",()=>{i=this.getElementsByClass(".acc-content"),c=this.getElementsByClass(".acc-label");for(let t=0;t<i.length;t+=1)c[t].parentElement.classList.remove("acc-item-select"),c[t].classList.remove("active"),i[t].removeAttribute("style"),i[t].classList.remove("acc-top"),i[t].classList.add("dxp-none")})}getElementsByClass(t){const e=new Array,s=this.element.querySelector("slot");if(s)s.assignedNodes().filter(s=>{if("#text"!==s.nodeName){const i=s.querySelector(t);e.push(i)}});else{const s=this.element.querySelectorAll("dxp-accordion-item");for(const i of s)e.push(i.querySelector(t))}return e}render(){e.log.debug(this.element.tagName,"render()","in dxp-accordion render() : DEVELOPMENT");const t=[s("link",{rel:"stylesheet",href:""}),[s("link",{rel:"stylesheet",href:`${e.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-accordion.min.css`})],[this.theme&&s("link",{rel:"stylesheet",href:""})]];return s("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,s("div",{class:"toggle"},s("div",{class:"dxp-row"},this.isHeaderRequired&&s("div",{class:"dxp-col-12"},s("p",{class:"title-wrapper"},s("span",{class:"dxp-text-eyebrow dxp-col-sm-6 dxp-col-12"},this.heading),this.childElementCount>1||this.items&&this.items.length>1?s("span",{class:"dxp-col-sm-6 dxp-col-12"},s("span",{tabindex:"0",class:"expand-all dxp-no-outline",role:"button"},e.i18n.t("Accordion:expandAll")),s("span",{class:"pipe-separator"}),s("span",{tabindex:"0",class:"collapse-all dxp-no-outline",role:"button"},e.i18n.t("Accordion:collapseAll"))):""))),this.items?this.items.map(t=>s("dxp-accordion-item",{"item-title":t.title,"item-subtitle":t.subtitle,"item-description":t.description,"show-expanded":t.showExpanded})):s("div",{ref:t=>this.accItemContainer=t},s("slot",null))))}get element(){return i(this)}static get watchers(){return{items:["accordionChangeHandler"]}}static get style(){return"div.dxp.dxp-accordion dxp-accordion-item{display:block;width:100%}div.dxp.dxp-accordion .toggle .title-wrapper{padding-bottom:1.5rem;margin-bottom:2rem;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}div.dxp.dxp-accordion .toggle .title-wrapper>span{padding:0}div.dxp.dxp-accordion .toggle .title-wrapper>span:last-child{text-align:right}div.dxp.dxp-accordion .toggle .title-wrapper>span:only-child{text-align:left}div.dxp.dxp-accordion .toggle .expand-all{cursor:pointer}div.dxp.dxp-accordion .toggle .collapse-all{cursor:pointer;margin-left:.5625rem}div.dxp.dxp-accordion .pipe-separator:after{content:\"|\";padding-left:.75rem}\@media (max-width:575px){div.dxp.dxp-accordion .toggle .title-wrapper{border:none;margin-bottom:1rem}div.dxp.dxp-accordion .toggle .title-wrapper>span:first-child{padding-bottom:2rem}}div.dxp.dxp-accordion[dir=rtl] .toggle .title-wrapper>span:last-child{text-align:left}div.dxp.dxp-accordion[dir=rtl] .toggle .title-wrapper>span:only-child{text-align:right}"}};export{o as dxp_accordion};