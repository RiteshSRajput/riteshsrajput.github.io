import{r as t,c as e,d as s,h as i,g as o}from"./p-8188e849.js";import{B as c}from"./p-16d6f0ca.js";const n={en:{close:"Click to close region selector",countryLanguagePageText:"Other Country or Region"},"en-US":{close:"Click to close region selector",countryLanguagePageText:"Other Country or Region"},es:{close:"Haga clic para cerrar el selector de región",countryLanguagePageText:"Otro país o región"},"es-ES":{close:"Haga clic para cerrar el selector de región",countryLanguagePageText:"Otro país o región"}},r=class{constructor(s){t(this,s),this.buttonClick=e(this,"buttonClick",7)}async componentWillLoad(){this.base=new c(this,s),this.base.i18Init(s,"RegionSelector",n),document.querySelector('meta[name="country_code"]')&&(this.originCountry=document.querySelector('meta[name="country_code"]').getAttribute("content").toLowerCase().trim()),this.siteList=this.compareLocales()||this.siteList?this.parseSiteList(JSON.parse(this.siteList)):await this.getSiteList(),this.countryLanguagePageLink&&this.siteList.push({text:this.countryLanguagePageText||s.i18n.t("RegionSelector:countryLanguagePageText"),link:this.countryLanguagePageLink})}onClick(){const t=this.element.querySelector("select");this.setCookie(this.siteList[t.selectedIndex].locale),window.location.href=this.siteList[t.selectedIndex].link}routingHandler(t){this.base.routingEventListener(t)}compareLocales(){return this.originCountry.toLowerCase().trim()===this.locale.toLowerCase().split("-")[1]}dismissRegionSelector(){this.element.querySelector(".dxp-region-selector").classList.add("dxp-none")}async getSiteList(){if(this.apiUrl)try{return this.parseSiteList(await s.api(this.apiUrl))}catch(t){s.log.error(this.element.tagName,"getSiteList()",`fetch failed for ${this.apiUrl}`,t)}}parseSiteList(t){const e=[];for(const s of t.regions)s.countries.forEach(t=>{t.countryCode.toLowerCase()===this.originCountry.toLowerCase()&&t.locales.forEach(s=>{s.country=t.country,s.countryCode=t.countryCode,e.push(s)})});return e}setCookie(t){const e=this.cookieExpiryTime?this.cookieExpiryTime:7,s=new Date;s.setTime(s.getTime()+24*e*60*60*1e3);const i=`expires=${s.toUTCString()}`;document.cookie=`locale=${t};${i};path=/`}render(){if(!this.compareLocales()&&this.siteList){const t=[i("link",{rel:"stylesheet",href:`${s.config.get("DXP_STYLE_BASE_URL")}/dxp.css`}),[this.theme&&i("link",{rel:"stylesheet",href:""})],[this.theme&&i("link",{rel:"stylesheet",href:`${s.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-region-selector.min.css`})]];return i("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,i("div",{class:"padding"},i("div",{class:"dxp-row"},i("div",{class:"dxp-col-12"},i("div",{class:"region-selector-wrapper"},i("div",{class:"dxp-col-sm-12 dxp-col-md-12 dxp-col-lg-6"},this.eyebrowText&&i("p",{class:"eyebrow-text",innerHTML:this.eyebrowText}),this.titleText&&i("p",{class:"title-text",innerHTML:this.titleText})),i("div",{class:"dxp-col-sm-12 dxp-col-md-12 dxp-col-lg-6"},i("div",{class:"close-icon",onClick:()=>this.dismissRegionSelector(),onKeyUp:t=>13===t.keyCode&&this.dismissRegionSelector()},i("span",{class:"dxp-icon dxp-icon-close","aria-label":s.i18n.t("RegionSelector:close"),tabIndex:3})),i("div",{class:"row-reverse dxp-col-sm-12"},this.buttonText&&i("div",{class:"cta-button",tabIndex:-1},i("dxp-cta",{type:"button","button-type":"secondary",text:this.buttonText,tabIndex:2})),i("div",{class:"select-button"},i("select",{tabIndex:1},this.siteList.map(t=>t.hasOwnProperty("country")?i("option",null,`${t.country} - ${t.language}`):i("option",null,t.text)))))))))))}}get element(){return o(this)}static get style(){return"div.dxp.dxp-region-selector{z-index:999;position:fixed;top:0;width:100%}div.dxp.dxp-region-selector .padding{padding-top:2rem;padding-bottom:1.625rem}div.dxp.dxp-region-selector .region-selector-wrapper{width:100%}div.dxp.dxp-region-selector .region-selector-wrapper p{margin:0;padding:0}div.dxp.dxp-region-selector .region-selector-wrapper .eyebrow-text{font-size:.75rem;line-height:1rem;text-transform:uppercase;letter-spacing:.1125rem;text-align:left;margin-bottom:.275rem}div.dxp.dxp-region-selector .region-selector-wrapper .eyebrow-text:only-child{margin-top:1rem}div.dxp.dxp-region-selector .region-selector-wrapper .title-text{font-size:1rem;line-height:1.5rem}div.dxp.dxp-region-selector .region-selector-wrapper .title-text:only-child{margin-top:.75rem}div.dxp.dxp-region-selector .region-selector-wrapper .row-reverse{width:auto;float:right}div.dxp.dxp-region-selector .region-selector-wrapper .select-button{float:right}div.dxp.dxp-region-selector .region-selector-wrapper .select-button select{width:18rem;height:2.5rem;border-radius:.25rem;padding-right:2.4rem}div.dxp.dxp-region-selector .region-selector-wrapper .select-button select:focus{outline:none}div.dxp.dxp-region-selector .region-selector-wrapper .cta-button{float:right;margin-left:1rem}div.dxp.dxp-region-selector .region-selector-wrapper .close-icon{float:right}div.dxp.dxp-region-selector .region-selector-wrapper .close-icon .cta-with-icon{margin-left:.375rem}div.dxp.dxp-region-selector .region-selector-wrapper .close-icon .dxp-icon-close{font-size:1.1275rem;margin-top:.75rem;margin-left:1.7175rem;display:block}div.dxp.dxp-region-selector .region-selector-wrapper .close-icon .dxp-icon-close:focus{outline:1px solid}div.dxp.dxp-region-selector .region-selector-wrapper .dxp-btn-secondary:focus:before{border:0}\@media (max-width:992px){div.dxp.dxp-region-selector .region-selector-wrapper .row-reverse{margin-top:1.25rem;width:auto;padding-left:0;display:-webkit-flex;-webkit-flex-direction:row-reverse;display:-ms-flexbox;display:flex;-ms-flex-direction:row-reverse;flex-direction:row-reverse;float:left}div.dxp.dxp-region-selector .region-selector-wrapper .select-button{float:left;margin-bottom:.5rem}div.dxp.dxp-region-selector .region-selector-wrapper .cta-button{float:left}div.dxp.dxp-region-selector .region-selector-wrapper .close-icon{float:right;margin-top:-3.1875rem}}\@media (max-width:767px){div.dxp.dxp-region-selector .region-selector-wrapper .padding{padding-top:1.375rem;padding-bottom:1.5rem}div.dxp.dxp-region-selector .region-selector-wrapper .row-reverse{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}div.dxp.dxp-region-selector .region-selector-wrapper .cta-button{margin-left:0;margin-top:1rem}div.dxp.dxp-region-selector .region-selector-wrapper .eyebrow-text,div.dxp.dxp-region-selector .region-selector-wrapper .title-text{margin-right:3.5rem}div.dxp.dxp-region-selector .region-selector-wrapper .close-icon{margin-top:-4.85rem}}div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper p:first-child{text-align:right}div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .row-reverse{display:-webkit-flex;-webkit-flex-direction:row-reverse;display:-ms-flexbox;display:flex;-ms-flex-direction:row-reverse;flex-direction:row-reverse}div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .cta-button{margin-left:auto;margin-right:1rem}div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .close-icon{float:left}\@media (max-width:992px){div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .row-reverse{float:right;padding-right:0}}\@media (max-width:767px){div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .row-reverse{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .dxp-icon-close{margin-left:0}div.dxp.dxp-region-selector[dir=rtl] .region-selector-wrapper .cta-button{margin-right:0}}\@media (max-width:767px){div.dxp.dxp-region-selector .padding{padding-top:1.375rem;padding-bottom:1.5rem}}"}};export{r as dxp_region_selector};