import{r as t,d as i,h as e,g as s}from"./p-8188e849.js";import{B as n}from"./p-16d6f0ca.js";import{m as a}from"./p-48fd26af.js";const h=class{constructor(i){t(this,i)}dataChangeHandler(){this.base.createNestedMarkup(this.itemContainer,"dxp-in-page-nav-item",this.inPageNavItemsData)}componentWillLoad(){this.base=new n(this,i),this.base.i18Init(i,"InPageNav",a);const t=this.element;let e="";i.util.appendLinkElement(t,e),e=`${i.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}.min.css`,i.util.appendLinkElement(t,e)}async componentDidLoad(){this.dataChangeHandler();const t=this.element.querySelector(".dxp-in-page-nav");this.NAV_HEIGHT=this.clientHeight(t),this.NAV_OFFSET_TOP=t.offsetTop,this.navItems=(this.element.querySelectorAll("dxp-in-page-nav-item"),this.element.querySelectorAll("dxp-in-page-nav-item")),await this.handleScroll()}async handleScroll(){let t;for(let s=0;s<this.navItems.length;s++)this.checkViewPort(document.querySelector(await this.navItems[s].getHref()),s===this.navItems.length-1?void 0:document.querySelector(await this.navItems[s+1].getHref()))&&!t?(this.navItems[s].setAttribute("active",!0),t=!0):this.navItems[s].setAttribute("active",!1);window.innerWidth<767&&!t&&await this.navItems[0].setActive();const i=this.element.querySelector("nav"),e=this.element.querySelector(".dxp-in-page-nav");i&&(window.pageYOffset>i.offsetTop&&(i.classList.add("fixed"),e.classList.add("fixed")),window.pageYOffset<=this.NAV_OFFSET_TOP&&(i.classList.remove("fixed"),e.classList.remove("fixed")))}routingHandler(t){this.base.routingEventListener(t)}checkViewPort(t,i){return i?t.getBoundingClientRect().top<this.NAV_HEIGHT+window.innerHeight/2&&i.getBoundingClientRect().top>this.NAV_HEIGHT+window.innerHeight/2:t.getBoundingClientRect().top<this.NAV_HEIGHT+window.innerHeight/2&&Number.MAX_VALUE>this.NAV_HEIGHT+window.innerHeight/2}clientHeight(t){return t.clientHeight}toggleNavDropdown(){if(window.innerWidth<=767){const t=this.element.querySelector(".triangle")||this.element.querySelector(".triangle");t.classList.contains("up")?(t.classList.remove("up"),t.classList.add("down")):(t.classList.add("up"),t.classList.remove("down")),this.navItems.forEach(async t=>{t.querySelector(".dxp-in-page-nav-item").classList.toggle("dxp-block"),await t.getActive()?t.querySelector(".dxp-in-page-nav-item").classList.add("bg-white"):t.querySelector(".dxp-in-page-nav-item").classList.remove("bg-white")})}}render(){i.log.debug(this.element.tagName,"render()","in dxp-in-page-nav render() : DEVELOPMENT");const t=[e("link",{rel:"stylesheet",href:""}),[this.theme&&e("link",{rel:"stylesheet",href:""})],[this.theme&&e("link",{rel:"stylesheet",href:`${i.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-in-page-nav.min.css`})]];return e("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,e("nav",null,e("ul",{class:"nav-list",role:"menu",onClick:()=>this.toggleNavDropdown()},e("div",{ref:t=>this.itemContainer=t},e("slot",null))),e("div",{class:"triangle down",onClick:()=>this.toggleNavDropdown()})))}get element(){return s(this)}static get watchers(){return{inPageNavItemsData:["dataChangeHandler"]}}static get style(){return"div.dxp.dxp-in-page-nav{text-align:center;z-index:2}div.dxp.dxp-in-page-nav nav{width:100%;min-height:55px;z-index:1}div.dxp.dxp-in-page-nav nav .nav-list{margin:0}div.dxp.dxp-in-page-nav .fixed{position:fixed;top:0;left:0;-webkit-box-shadow:0 4px 6px 0 rgba(20,20,19,.1);box-shadow:0 4px 6px 0 rgba(20,20,19,.1);z-index:10}div.dxp.dxp-in-page-nav .triangle.down,div.dxp.dxp-in-page-nav .triangle.up{border-top:0}\@media screen and (min-width:320px) and (max-width:767px){div.dxp.dxp-in-page-nav{z-index:2}div.dxp.dxp-in-page-nav .triangle{display:inline-block;margin:0 5px;vertical-align:middle;position:absolute;right:20px;width:0;height:9px}div.dxp.dxp-in-page-nav .triangle.up{border-left:8px solid transparent;border-right:8px solid transparent;margin-top:24px}div.dxp.dxp-in-page-nav .triangle.down{border-left:8px solid transparent;border-right:8px solid transparent;margin-top:28px}div.dxp.dxp-in-page-nav nav{width:100%;min-height:55px;position:relative}div.dxp.dxp-in-page-nav nav .nav-list{width:100%;float:left;padding:0}div.dxp.dxp-in-page-nav.fixed{position:fixed;top:0;left:0}}"}};export{h as dxp_in_page_nav};