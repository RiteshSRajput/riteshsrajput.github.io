var __awaiter=this&&this.__awaiter||function(t,e,i,s){function a(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function n(t){try{l(s.next(t))}catch(e){r(e)}}function h(t){try{l(s["throw"](t))}catch(e){r(e)}}function l(t){t.done?i(t.value):a(t.value).then(n,h)}l((s=s.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,a,r,n;return n={next:h(0),throw:h(1),return:h(2)},typeof Symbol==="function"&&(n[Symbol.iterator]=function(){return this}),n;function h(t){return function(e){return l([t,e])}}function l(n){if(s)throw new TypeError("Generator is already executing.");while(i)try{if(s=1,a&&(r=n[0]&2?a["return"]:n[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;if(a=0,r)n=[n[0]&2,r.value];switch(n[0]){case 0:case 1:r=n;break;case 4:i.label++;return{value:n[1],done:false};case 5:i.label++;a=n[1];n=[0];continue;case 7:n=i.ops.pop();i.trys.pop();continue;default:if(!(r=i.trys,r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){i=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){i.label=n[1];break}if(n[0]===6&&i.label<r[1]){i.label=r[1];r=n;break}if(r&&i.label<r[2]){i.label=r[2];i.ops.push(n);break}if(r[2])i.ops.pop();i.trys.pop();continue}n=e.call(t,i)}catch(h){n=[6,h];a=0}finally{s=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:true}}};System.register(["./p-f4cc861d.system.js","./p-4b0c1219.system.js"],(function(t){"use strict";var e,i,s,a,r,n;return{setters:[function(t){e=t.r;i=t.c;s=t.d;a=t.h;r=t.g},function(t){n=t.B}],execute:function(){var h=function(){function t(){this.DEFAULT_CVC_LENGTH=3;this.DEFAULT_ZIP_LENGTH=5;this.DEFAULT_CARD_FORMAT=/(\d{1,4})/g;this.CARD_TYPES=[{type:"amex",format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,startPattern:/^3[47]/,maxCardNumberLength:17,cvcLength:4},{type:"dankort",format:this.DEFAULT_CARD_FORMAT,startPattern:/^5019/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"hipercard",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"dinersclub",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(36|38|30[0-5])/,maxCardNumberLength:14,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"discover",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(6011|65|64[4-9]|622)/,maxCardNumberLength:16,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"jcb",format:this.DEFAULT_CARD_FORMAT,startPattern:/^35/,maxCardNumberLength:16,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"laser",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(6706|6771|6709)/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"maestro",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"mastercard",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"unionpay",format:this.DEFAULT_CARD_FORMAT,startPattern:/^62/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH,luhn:false},{type:"visaelectron",format:this.DEFAULT_CARD_FORMAT,startPattern:/^4(026|17500|405|508|844|91[37])/,maxCardNumberLength:16,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"elo",format:this.DEFAULT_CARD_FORMAT,startPattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,maxCardNumberLength:16,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"visa",format:this.DEFAULT_CARD_FORMAT,startPattern:/^4/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH},{type:"fake",format:this.DEFAULT_CARD_FORMAT,startPattern:/^[0-9]/,maxCardNumberLength:19,cvcLength:this.DEFAULT_CVC_LENGTH}]}t.prototype.getCardTypeByValue=function(t){return this.CARD_TYPES.filter((function(e){return e.startPattern.test(t)}))[0]};t.prototype.formatCardNumber=function(t){var e=this.getCardTypeByValue(t);if(!e){return false}var i=e.format;if(i.global){return{value:t.match(i).join(" "),cardType:e}}var s=i.exec(t.split(" ").join(""));if(s){return{value:s.splice(1,3).filter((function(t){return t})).join(" "),cardType:e}}return t};return t}();var l="view-pass-icon";var o=t("dxp_input",function(){function t(t){e(this,t);this.cardInfo=[];this.isListenerAttached=false;this.isPassword=false;this.isTypeCard=false;this.isValid=true;this.isValidate=false;this.autoFocus=false;this.disabled=false;this.enableAutocomplete="off";this.isOptional=false;this.isRequired=false;this.max="";this.maxLength=100;this.min="";this.minLength=0;this.readonly=false;this.step="";this.type="text";this.validationMessage="";this.value="";this.width="";this.textValue=i(this,"textValue",7)}t.prototype.componentWillLoad=function(){this.base=new n(this,s);document.addEventListener("invalid",function(){return function(t){t.preventDefault()}}(),true);this.type==="password"?this.isPassword=true:this.isPassword=false;if(this.type==="card"){this.type="text";this.isTypeCard=true}};t.prototype.handleBlur=function(t){if(!this.isValidate){if(t.key!=="Tab"){this.isValidate=true;this.isValid=true}}};t.prototype.routingHandler=function(t){this.base.routingEventListener(t)};t.prototype.handleChange=function(t){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(i){if(this.isValidate){this.textValue.emit({value:t.target.value});this.value=t.target.value;if(this.isTypeCard){this.handleCard(t);e=[];if(this.value!==""){e.push(this.isValid)}e.push(this.isRequiredProvided(this.value));this.isValid=e.every((function(t){return t}))}else{this.isValid=this.isValidInput(this.value)}}return[2]}))}))};t.prototype.updateValidationState=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.isValid=t;return[2]}))}))};t.prototype.handleCard=function(t){var e=isNaN(Number(t.target.value.split(" ").join("")));if(!e){var i=(new h).formatCardNumber(t.target.value);if(i!==false){this.value=i.value;this.cardType=i.cardType.type;this.maxLength=i.cardType.maxCardNumberLength;if(this.value.length===this.maxLength){this.isValid=true;if(this.cardType==="fake"){this.isValid=false}}else{this.isValid=false}}else{this.isValid=i;this.cardType="";this.maxLength=16}}else{if(this.value.length!==0){this.value=this.value.substring(0,this.value.length-1)}else{this.value=""}}};t.prototype.isRequiredProvided=function(t){if(this.isOptional===true){return true}if(t===""){return false}return true};t.prototype.isValidCardInput=function(t){if(this.isTypeCard){if(this.value.length!==19){if(this.cardInfo.length!==3){this.cardInfo.push(t)}else{this.value=this.value+"-";this.cardInfo=[]}return false}this.textValue.emit({value:this.value.replace(/-/g,"")});return true}};t.prototype.isValidInput=function(t){if(this.type==="email"){if(this.pattern===undefined){this.pattern=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}}if(this.type==="url"&&this.isOptional===false){return this.isValidUrlPattern(t)}if(this.type==="password"){return this.isValidPassword(t)}if(this.type==="number"){return this.isValidNumber(t)}if(this.minLength!==0){var e=this.isValidMinLength(t);if(!e){return false}}if(this.pattern!==undefined){return this.isValidPattern(t)}return this.isRequiredProvided(t)};t.prototype.isValidMinLength=function(t){return t!==""&&t.length>this.minLength};t.prototype.isValidNumber=function(t){var e=[];e.push(this.isRequiredProvided(t));if(t===""){t=0}if(this.min!==""){e.push(parseInt(this.min,10)<=parseInt(t,10))}if(this.max!==""){e.push(parseInt(this.max,10)>=parseInt(t,10))}e.push(this.isValidPattern(t));return e.every((function(t){return t}))};t.prototype.isValidPassword=function(t){var e=this.isRequiredProvided(t);if(e){if(t.length>=this.minLength){return this.isValidPattern(t)}return false}return false};t.prototype.isValidPattern=function(t){this.pattern=new RegExp(this.pattern);if(t!==""&&!this.pattern.test(t)){return false}return this.isRequiredProvided(t)};t.prototype.isValidUrlPattern=function(t){if(this.pattern===undefined){var e=new RegExp("^(http://www.|https://www.|http://|https://)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$");return t!==""&&e.test(t)}return this.isValidPattern(t)};t.prototype.togglePasswordIcon=function(t){this.type="text";if(!t.target.classList.contains(l)){t.target.classList.remove("hide-pass-icon");t.target.classList.add(l)}else{t.target.classList.remove(l);t.target.classList.add("hide-pass-icon")}};t.prototype.render=function(){var t=this;this.validationMessage=this.validationMessage===""?"Please enter a valid "+(this.label?this.label:"field"):this.validationMessage;var e=[a("link",{rel:"stylesheet",href:""}),[this.theme&&a("link",{rel:"stylesheet",href:""})],[this.theme&&a("link",{rel:"stylesheet",href:s.config.get("DXP_STYLE_BASE_URL")+"/themes/"+this.theme+"/dxp-input.min.css"})]];return a("div",{class:this.base.componentClass(),"data-theme":this.theme},e,a("label",{class:this.disabled?"dxp-disabled dxp-inputbox-label":this.isValid?"dxp-inputbox-label":"dxp-inputbox-label dxp-error",htmlFor:this.label},this.label,this.isOptional?a("span",{class:"dxp-optional"}," (Optional)"):""),a("div",{class:"input-container"},a("input",{class:this.isValid?"":"has-error",type:this.type,id:this.contentId,name:this.name,spellcheck:this.spellcheckRequired,"aria-invalid":!this.isValid,"aria-required":this.isOptional?"":"true","aria-label":this.accessibilityText,placeholder:this.placeholder,value:this.value,minlength:this.minLength,maxlength:this.maxLength,autocomplete:this.enableAutocomplete,onInput:function(e){return t.handleChange(e)},autoComplete:this.enableAutocomplete,readonly:this.readonly,disabled:this.disabled,autofocus:this.autoFocus,height:this.height,width:this.width,min:this.min,max:this.max,step:this.step,pattern:this.pattern}),!this.isValid&&a("span",{class:"input-icon icon-sprite error-circle-red"}),this.isTypeCard?a("span",{class:"icon-inputs "+this.cardType}):"",this.isPassword?a("span",{class:"icon-inputs view-pass-icon",onClick:function(e){return t.togglePasswordIcon(e)}}):""),this.isValid?"":a("div",{class:"dxp-error",id:"errMsg","aria-label":this.validationMessage},this.validationMessage))};Object.defineProperty(t.prototype,"element",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"div.dxp.dxp-input .input-container{position:relative;width:100%}div.dxp.dxp-input .dxp-inputbox-label{font-size:12px;margin-bottom:.25rem}div.dxp.dxp-input .input-icon{position:absolute;right:.5rem;top:.75rem}div.dxp.dxp-input .icon-inputs{background:transparent url(process.env.DXP_COMPONENT_ASSET_PATH/dxp-input/card-icons-sprite.svg) no-repeat;background-size:650%;background-position-y:5px;display:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:5px;width:30px;height:30px}div.dxp.dxp-input.amex,div.dxp.dxp-input.discover,div.dxp.dxp-input.hide-pass-icon,div.dxp.dxp-input.jcp,div.dxp.dxp-input.unionpay,div.dxp.dxp-input.view-pass-icon,div.dxp.dxp-input.visa{display:block}div.dxp.dxp-input .mastercard{background-position-x:0}div.dxp.dxp-input .visa{background-position-x:-32px}div.dxp.dxp-input .amex{background-position-x:-100px}div.dxp.dxp-input .unionpay{background-position-x:-65px}div.dxp.dxp-input .discover{background-position-x:-165px}div.dxp.dxp-input .jcb{background-position-x:-132px}div.dxp.dxp-input .hide-pass-icon{background:transparent url(process.env.DXP_COMPONENT_ASSET_PATH/dxp-input/hide-pass.svg) 2px 9px no-repeat}div.dxp.dxp-input .view-pass-icon{background:transparent url(process.env.DXP_COMPONENT_ASSET_PATH/dxp-input/show-pass.svg) 2px 9px no-repeat}div.dxp.dxp-input [dir=rtl] .hide-pass-mask,div.dxp.dxp-input [dir=rtl] .view-pass-mask{right:auto;left:5px}div.dxp.dxp-input .input-box{display:block;width:100%;height:2.5rem;padding:.625rem 3.25rem .625rem 1rem;font-size:.875rem;line-height:1.25rem}div.dxp.dxp-input .input-box::-ms-clear{display:none}"},enumerable:true,configurable:true});return t}())}}}));