import{r as e,d as t,h as n,g as i}from"./p-8188e849.js";import{B as a}from"./p-16d6f0ca.js";import{m as s,C as o}from"./p-dcda0608.js";const d=class{constructor(t){e(this,t)}async componentWillLoad(){this.base=new a(this,t),this.base.i18Init(t,"Navigation",s);const e=this.element;let n="";if(t.util.appendLinkElement(e,n),t.util.appendLinkElement(e,n=""),n=`${t.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-navigation.min.css`,t.util.appendLinkElement(e,n),this.utility=new o,this.apiUrl)try{this.navData=await t.api(this.apiUrl)}catch(i){t.log.error(this.element.tagName,"componentWillLoad()",`fetch failed for ${this.apiUrl}`,i)}}componentDidLoad(){const e=(this.element.querySelectorAll("dxp-nav-group"),this.element.querySelectorAll("dxp-nav-group"));this.utility.preventExtraMenuItems(e,5),this.defaultActions()}componentDidUpdate(){this.defaultActions()}handleClickEvent(e){this.base.routingEventListener(e);const t=e.target?e.composedPath()[0]:e.target,n=(this.element.querySelectorAll(".down"),this.element.querySelectorAll(".down")),i=t?t.closest(".in"):void 0;this.menuItemsHandler(t,t?t.nextElementSibling:void 0,n,i)}handleDocumentClick(e){const t=e.target.closest("dxp-navigation"),n=this.element.querySelector('[aria-expanded="true"]')||this.element.querySelector('[aria-expanded="true"]'),i=this.element.querySelector(".dxp-block")||this.element.querySelector(".dxp-block");this.collapseExpandedNav(t,n,i)}handleKeydownEvents(e){const t=e.keyCode,n=e.target?e.target.activeElement:e.target,i=this.element.querySelector(".dxp-block");let a,s,o,d,l,h,c,m,p,r;n&&(a=n.classList.contains("nav-level-one-link"),s=n.parentElement.querySelector(".mega-menu-container"),o=n.classList.contains("mega-menu-link"),d=n.parentElement.querySelector(".mega-sub-menu"),l=n.classList.contains("mega-sub-menu-link"),h=!!n.closest("dxp-nav-item")&&n.closest("dxp-nav-item").nextElementSibling,c=!!n.closest("dxp-nav-item")&&n.closest("dxp-nav-item").previousElementSibling,m=!!n.closest("dxp-nav-sub-item")&&n.closest("dxp-nav-sub-item").nextElementSibling,p=!!n.closest("dxp-nav-sub-item")&&n.closest("dxp-nav-sub-item").previousElementSibling),this.preventDefaultAction(e,[32,37,38,39,40]),this.hideNavItem(n,a,i,t),s&&(r=s.classList.contains("dxp-block")),this.showHideMenuWithKeys(n,t,s,r),this.selectNestedMenuItem(s,t,r),this.navigateInExpandedMenu(o,t,d,h),this.navigateSubItems(l,m,t,p),this.selectParentNavItem(n,p,l,t),this.selectPrevNavItem(o,c,t),this.selectNextNavItem(l,m,h,t)}handleUpkeyEvents(e){const t=e.target?e.target.activeElement:e.target,n=e.keyCode,i=this.element.querySelector(".dxp-block"),a=this.element.querySelector('[aria-expanded="true"]'),s=this.element.querySelector(".dxp-block");let o;t&&(o=t.classList.contains("nav-level-one-link")),this.hideMenuItemsOnKeyPress(t,n,o,i,s,a)}onWindowResize(){const e=document.querySelector(".nav-overlay"),t=window.innerWidth;e&&(e.style.display=t>=992?"none":"block")}collapseAllMenus(e){for(const t of Object.keys(e))clearTimeout(this.clearSetTimeout),e[t].classList.remove("down"),e[t].previousElementSibling.classList.remove("active-link"),e[t].nextElementSibling.classList.remove("in"),e[t].nextElementSibling.classList.remove("max-height-none")}collapseExpandedNav(e,t,n){!e&&n&&(t.setAttribute("aria-expanded","false"),n.classList.remove("dxp-block"))}defaultActions(){const e=(this.element.querySelectorAll(".nav-level-one-link"),this.element.querySelectorAll(".nav-level-one-link"));this.utility.setPosNSize(e)}focusElement(e){e.focus()}hideMenuItemsOnKeyPress(e,t,n,i,a,s){n&&i&&9===t&&(e.setAttribute("aria-expanded","false"),i.classList.remove("dxp-block")),a&&27===t&&(this.focusElement(s),s.setAttribute("aria-expanded","false"),a.classList.remove("dxp-block"))}hideNav(e,t,n){const i=document.querySelector(".nav-overlay");e.classList.remove("nav-height"),e.classList.remove("overflow-y-auto"),t.classList.remove("nav-close"),t.classList.add("hamburger-btn"),this.collapseAllMenus(n),i&&setTimeout(()=>{i.remove()},200)}hideNavItem(e,t,n,i){t&&n&&9===i&&(e.setAttribute("aria-expanded","false"),n.classList.remove("dxp-block"))}hideSubMenu(e){clearTimeout(this.clearSetTimeout),e.previousElementSibling.classList.remove("active-link"),e.classList.remove("down"),e.nextElementSibling.classList.remove("in"),e.nextElementSibling.classList.remove("max-height-none")}menuItemsHandler(e,t,n,i){const a=i?i.querySelector(".down"):void 0;e&&e.classList.contains("caret")&&(e.classList.contains("down")?i&&a?this.hideSubMenu(a):this.collapseAllMenus(n):(n&&!i&&this.collapseAllMenus(n),i&&a&&this.hideSubMenu(a),e.previousElementSibling.classList.add("active-link"),e.classList.add("down"),t.classList.add("in"),this.clearSetTimeout=setTimeout(()=>{t.classList.add("max-height-none")},600)))}navigateInExpandedMenu(e,t,n,i){if(e&&(39===t||40===t)){if(n){const e=n.querySelectorAll("a");this.focusElement(e[1])}!n&&i&&i.querySelector(".mega-menu-content a").focus()}}navigateSubItems(e,t,n,i){e&&t&&(39===n||40===n)&&t.querySelector("a").focus(),e&&i&&(37===n||38===n)&&i.querySelector("a").focus()}preventDefaultAction(e,t){t.indexOf(e.keyCode)>-1&&e.preventDefault()}selectNestedMenuItem(e,t,n){if(e&&(39===t||40===t)&&n){const t=e.querySelector(".mega-menu-content").querySelector("a");this.focusElement(t)}}selectNextNavItem(e,t,n,i){!e||t||!n||39!==i&&40!==i||n.querySelector(".mega-menu-content a").focus()}selectParentNavItem(e,t,n,i){if(n&&!t&&(37===i||38===i)){const t=e.closest(".mega-menu-content").querySelector(".mega-menu-link");this.focusElement(t)}}selectPrevNavItem(e,t,n){if(e&&t&&(37===n||38===n)){const e=t.querySelectorAll(".mega-sub-menu-link");this.focusElement(e.length?e[e.length-1]:t.querySelector(".mega-menu-link"))}}showHideMenuWithKeys(e,t,n,i){32!==t&&39!==t&&40!==t||!n||(39!==t&&40!==t&&i?(e.setAttribute("aria-expanded","false"),n.classList.remove("dxp-block")):(e.setAttribute("aria-expanded","true"),n.classList.add("dxp-block")))}render(){return t.log.debug("in dxp-navigation render() : DEVELOPMENT"),n("nav",{dir:this.dir,"data-theme":this.theme,class:`${this.base.componentClass()} nav-primary`,role:"navigation"},n("ul",{class:"nav",role:"menu"},this.navData&&this.navData.navigationData?this.navData.navigationData.map(e=>n("dxp-nav-group",{"link-title":e.linkTitle,"navigation-title":e.navigationTitle,"menu-route-link":e.menuRouteLink,"accessibility-text":e.accessibilityText,child:e.child})):n("slot",null)))}get element(){return i(this)}static get style(){return".dxp.dxp-navigation{width:100%;display:block;background:none;-ms-flex-align:center;align-items:center}.dxp.dxp-navigation.pos-relative{position:relative}.dxp.dxp-navigation.nav-primary{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-order:1;order:1;margin-right:0;padding:0;width:100%;right:0}.dxp.dxp-navigation a{font-size:14px;letter-spacing:1.57px;line-height:24px;text-decoration:none}.dxp.dxp-navigation a:hover{text-decoration:none}.dxp.dxp-navigation .nav{padding:20px 28px 0 38px;width:100%;height:100%}\@media (min-width:992px){.dxp.dxp-navigation.nav-primary{width:100%;-ms-flex-direction:row;flex-direction:row;margin:0;right:auto;padding:0;-ms-flex-order:0;order:0;height:100%}.dxp.dxp-navigation a{font-size:16px;letter-spacing:0}.dxp.dxp-navigation .nav{background:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:auto}}\@media (max-width:991px){.dxp.dxp-navigation.nav-primary{overflow-y:hidden;max-height:0;-webkit-transition:max-height .35s ease;transition:max-height .35s ease}.dxp.dxp-navigation.nav-height{max-height:100vh;-webkit-transition:max-height .6s ease;transition:max-height .6s ease}.dxp.dxp-navigation.overflow-y-auto{overflow-y:auto}.dxp.dxp-navigation .nav{margin-top:0;padding-bottom:40px}}.dxp.dxp-navigation[dir=rtl].nav-primary{text-align:right;-ms-flex-align:start;align-items:flex-start}\@media (min-width:992px){.dxp.dxp-navigation[dir=rtl].nav-primary{margin-left:auto}.dxp.dxp-navigation[dir=rtl] .nav{padding:0}}"}};export{d as dxp_navigation};