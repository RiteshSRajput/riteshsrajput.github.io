System.register(["./p-f4cc861d.system.js","./p-4b0c1219.system.js"],(function(t){"use strict";var e,i,s,n,r;return{setters:[function(t){e=t.r;i=t.d;s=t.h;n=t.g},function(t){r=t.B}],execute:function(){var o={en:{months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds",milliseconds:"Milliseconds",stop:"Stop",start:"Start",reset:"Reset",minUnitError:"Please select minimum unit less than or equal to selected maximum unit.",invalidDateError:"Please enter date in valid ISO 8601 standard format (YYYY-MM-DDThh:mm:ssTZD)."},"en-US":{months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds",milliseconds:"Milliseconds",stop:"Stop",start:"Start",reset:"Reset",minUnitError:"Please select minimum unit less than or equal to selected maximum unit.",invalidDateError:"Please enter date in valid ISO 8601 standard format (YYYY-MM-DDThh:mm:ssTZD)."},es:{months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos",milliseconds:"Milisegundas",stop:"Detener",start:"comienzo",reset:"Reiniciar",minUnitError:"Seleccione la unidad mínima menor o igual a la unidad máxima seleccionada.",invalidDateError:"Ingrese la fecha en un formato estándar ISO 8601 válido (AAAA-MM-DDThh: mm: ssTZD)."},"es-ES":{months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos",milliseconds:"Milisegundas",stop:"Detener",start:"comienzo",reset:"Reiniciar",minUnitError:"Seleccione la unidad mínima menor o igual a la unidad máxima seleccionada.",invalidDateError:"Ingrese la fecha en un formato estándar ISO 8601 válido (AAAA-MM-DDThh: mm: ssTZD)."}};var a=t("dxp_timer",function(){function t(t){e(this,t);this.showError=false;this.timeUnitList=["months","days","hours","minutes","seconds","milliseconds"];this.displayDirection="horizontal";this.maxUnit="days";this.minUnit="milliseconds";this.stopAtZero=true;this.timerSize="small";this.timerType="countdown"}t.prototype.componentWillLoad=function(){this.base=new r(this,i);this.base.i18Init(i,"Timer",o);this.timeCounter={};this.timerStart=this.timerType==="countdown"?i.moment.utc():i.moment.utc();this.timerEnd=this.timerType==="countdown"?i.moment.parseZone(this.endTime).utc():i.moment.utc().clone();if(this.timeUnitList.indexOf(this.minUnit)<this.timeUnitList.indexOf(this.maxUnit)){this.errorMsg=i.i18n.t("Timer:minUnitError");this.showError=true}else{this.selectedUnitRange=this.timeUnitList.slice(this.timeUnitList.indexOf(this.maxUnit),this.timeUnitList.indexOf(this.minUnit)+1);this.durationDiff=i.moment.duration(Object.assign({},this.resetTimeCounter()));if(this.timerType==="stopwatch"){this.onReset()}else if(i.moment.utc(this.endTime).isValid()){this.setTimeCounter()}else{this.errorMsg=i.i18n.t("Timer:invalidDateError");this.showError=true}}};t.prototype.componentDidLoad=function(){if(this.timerType!=="stopwatch"){this.startTimerInterval()}};t.prototype.routingHandler=function(t){this.base.routingEventListener(t)};t.prototype.onReset=function(){this.timeCounter=Object.assign({},this.resetTimeCounter());this.duration=i.moment.duration(Object.assign({},this.resetTimeCounter())).clone();this.buttonText=i.i18n.t("Timer:start");this.buttonTitle="start";clearInterval(this.timerInterval)};t.prototype.onStart=function(t){var e=t.currentTarget.getAttribute("btn-title");if(e==="stop"){clearInterval(this.timerInterval);this.buttonText=i.i18n.t("Timer:start");this.buttonTitle="start"}else{this.timerEnd=i.moment.utc().clone();this.timerStart=i.moment.utc();this.durationDiff=this.duration;this.startTimerInterval();this.buttonText=i.i18n.t("Timer:stop");this.buttonTitle="stop"}};t.prototype.resetTimeCounter=function(){var t={};for(var e=0,i=this.selectedUnitRange;e<i.length;e++){var s=i[e];t[s]=0}return t};t.prototype.setTimeCounter=function(){this.timerStart=i.moment.utc().clone();var t=this.timerType==="countdown"?i.moment.utc(this.timerEnd).isSameOrAfter(this.timerStart):i.moment.utc(this.timerStart).isSameOrAfter(this.timerEnd);var e={};if(!this.stopAtZero||t){this.duration=this.timerType==="countdown"?i.moment.duration(this.timerEnd.diff(this.timerStart)):i.moment.duration(this.timerStart.diff(this.timerEnd)).add(this.durationDiff);for(var s=0,n=this.selectedUnitRange;s<n.length;s++){var r=n[s];e[r]=r===this.maxUnit?t?Math.floor(this.duration.as(r)):Math.ceil(this.duration.as(r)):this.duration.get(r)}}else{e=this.resetTimeCounter();clearInterval(this.timerInterval)}this.timeCounter=Object.assign({},e)};t.prototype.startTimerInterval=function(){var t=this;this.timerInterval=setInterval((function(){t.setTimeCounter()}),i.moment.duration(1,this.minUnit).asMilliseconds())};t.prototype.render=function(){var t=this;i.log.debug(this.element.tagName,"render()","in dxp-timer render() : "+"DEVELOPMENT");var e=[s("link",{rel:"stylesheet",type:"text/css",href:""}),[this.theme&&s("link",{rel:"stylesheet",href:""})],[this.theme&&s("link",{rel:"stylesheet",href:i.config.get("DXP_STYLE_BASE_URL")+"/themes/"+this.theme+"/dxp-timer.min.css"})]];return s("div",{class:""+this.base.componentClass(),dir:this.dir,"data-theme":this.theme},e,s("div",{class:this.displayDirection+" "+this.timerSize},this.showError?s("div",{class:"unit-wrapper error-msg"},this.errorMsg):Object.keys(this.timeCounter).map((function(e){return s("div",{class:"unit-wrapper"},s("div",{class:"unit-count"},t.timeCounter[e]),s("div",{class:"unit-label"},i.i18n.t("Timer:"+e)))}))),this.timerType==="stopwatch"&&!this.showError?s("div",{class:""+this.displayDirection},s("dxp-cta",{type:"button","btn-title":this.buttonTitle,"button-type":"secondary",text:this.buttonText,onClick:function(e){return t.onStart(e)}}),s("dxp-cta",{type:"button","btn-title":"reset-button","button-type":"secondary",text:i.i18n.t("Timer:reset"),onClick:function(){return t.onReset()}})):"")};Object.defineProperty(t.prototype,"element",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"div.dxp.dxp-timer{-ms-flex-direction:column;flex-direction:column}div.dxp.dxp-timer,div.dxp.dxp-timer .horizontal,div.dxp.dxp-timer .vertical{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap}div.dxp.dxp-timer .horizontal,div.dxp.dxp-timer .vertical{padding:.16rem}div.dxp.dxp-timer .horizontal dxp-cta:not(:first-child){padding-left:.5rem}div.dxp.dxp-timer .vertical{-ms-flex-direction:column;flex-direction:column}div.dxp.dxp-timer .vertical dxp-cta:not(:first-child){padding-top:.5rem}div.dxp.dxp-timer .unit-wrapper{-ms-flex:1 1 auto;flex:1 1 auto;text-align:center;min-width:4rem;margin:.16rem;padding:.25rem .5rem}div.dxp.dxp-timer .unit-wrapper.error-msg{width:20rem}div.dxp.dxp-timer .large{padding:.25rem}div.dxp.dxp-timer .large .unit-wrapper{margin:.25rem;min-width:6rem;padding:.75rem 1.5rem}\@media (max-width:767px){div.dxp.dxp-timer{padding:.1rem}div.dxp.dxp-timer .unit-wrapper{min-width:3rem;margin:.1rem;padding:.1rem .3rem}div.dxp.dxp-timer .large{padding:.25rem}div.dxp.dxp-timer .large .unit-wrapper{margin:.25rem;min-width:4rem;padding:.5rem 1.2rem}}"},enumerable:true,configurable:true});return t}())}}}));