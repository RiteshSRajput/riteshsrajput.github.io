import{r as i,c as s,d as t,h as a,g as h}from"./p-8188e849.js";import{B as e}from"./p-16d6f0ca.js";const r=class{constructor(t){i(this,t),this.changeValue=s(this,"changeValue",7)}componentWillLoad(){this.base=new e(this,t);const i=this.range.replace("[","").replace("]","");this.minRangeValue=i.split("-")[0],this.maxRangeValue=i.split("-")[1]}componentDidLoad(){"numeric-range-slider"===this.type?this.initMultiThumbSlider():this.initSingleThumbSlider()}routingHandler(i){this.base.routingEventListener(i)}commonInit(){this.innerBar=this.base.shadowRootQuerySelector(this.element,".inner-bar"),this.trackBorderWidth=1,this.thumbWidth=24,this.thumbHeight=24;const i="numeric-range-slider"===this.type?80:150,s=this.base.shadowRootQuerySelector(this.element,".slider-container");this.keyCode=Object.freeze({left:37,up:38,right:39,down:40});const t=this.element.parentElement;if(t&&window.getComputedStyle(t).getPropertyValue("width")){s.style.width=window.getComputedStyle(t).getPropertyValue("width");let a=parseInt(s.style.width,10);(s.style.width.indexOf("rem")>=0||s.style.width.indexOf("em")>=0)&&(a=16*parseInt(s.style.width,10)),this.rangeSliderTrack.style.width=`${(a-i).toString()}px`}this.rangeSliderTrackWidth=parseInt(window.getComputedStyle(this.rangeSliderTrack).getPropertyValue("width").slice(0,-2),10),this.minThumbNode.addEventListener("keydown",this.handleKeyDown.bind(this)),this.minThumbNode.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.minThumbNode.addEventListener("focus",this.handleFocus.bind(this)),this.minThumbNode.addEventListener("blur",this.handleBlur.bind(this))}fillLowerTrackInnerBar(){this.innerBar.style.left="0px",this.innerBar.style.width=`${parseInt(this.minThumbNode.style.left,10)+1}px`}fillMultipleThumbInnerBar(){this.innerBar.style.left=this.minThumbNode.style.left,this.innerBar.style.width=`${parseInt(this.maxThumbNode.style.left,10)-parseInt(this.minThumbNode.style.left,10)}px`}handleBlur(i){"min"===i.target.getAttribute("range-thumb")?this.minThumbNode.classList.remove("focus"):this.maxThumbNode.classList.remove("focus"),this.rangeSliderTrack.classList.remove("focus")}handleFocus(i){"min"===i.target.getAttribute("range-thumb")?this.minThumbNode.classList.add("focus"):this.maxThumbNode.classList.add("focus"),this.rangeSliderTrack.classList.add("focus")}handleKeyDown(i){let s=!1;const t=i.target.getAttribute("range-thumb");switch(this.valueNow="min"===t?parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10):parseInt(this.maxThumbNode.getAttribute("aria-valuenow"),10),i.keyCode){case this.keyCode.left:case this.keyCode.down:"min"===t?this.moveSliderTo(this.valueNow-1,this.minThumbNode,"min"):this.moveSliderTo(this.valueNow-1,this.maxThumbNode,"max"),s=!0;break;case this.keyCode.right:case this.keyCode.up:"min"===t?this.moveSliderTo(this.valueNow+1,this.minThumbNode,"min"):this.moveSliderTo(this.valueNow+1,this.maxThumbNode,"max"),s=!0}s&&(i.preventDefault(),i.stopPropagation())}handleMouseDown(i){const s=this,t=i.target.getAttribute("range-thumb"),a=i=>{s.valueNow=parseInt(s.minRangeValue+(s.maxRangeValue-s.minRangeValue)*(i.pageX-s.rangeSliderTrack.offsetLeft)/s.rangeSliderTrackWidth,10),"min"===t?s.moveSliderTo(s.valueNow,s.minThumbNode,"min"):s.moveSliderTo(s.valueNow,s.maxThumbNode,"max"),i.preventDefault(),i.stopPropagation()},h=()=>{if("numeric-range-slider"===this.type){this.maxThumbNode.classList.remove("focus");const i=parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10),s=parseInt(this.maxThumbNode.getAttribute("aria-valuenow"),10);this.changeValue.emit({minValue:this.minRangeValue,maxValue:this.maxRangeValue,range:[i,s]})}else{const i=parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10);this.changeValue.emit({minValue:this.minRangeValue,maxValue:this.maxRangeValue,currentValue:i})}this.minThumbNode.classList.remove("focus"),this.rangeSliderTrack.classList.remove("focus"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",h),i.preventDefault(),i.stopPropagation(),"min"===t?(s.minThumbNode.focus(),s.minThumbNode.classList.add("focus")):(s.maxThumbNode.focus(),s.maxThumbNode.classList.add("focus"))}initMultiThumbSlider(){this.minThumbNode=this.base.shadowRootQuerySelector(this.element,"[range-thumb=min]"),this.maxThumbNode=this.base.shadowRootQuerySelector(this.element,"[range-thumb=max]"),this.rangeSliderTrack=this.base.shadowRootQuerySelector(this.element,".multi-range-slider"),this.minValueNode=this.base.shadowRootQuerySelector(this.element,".min-value"),this.maxValueNode=this.base.shadowRootQuerySelector(this.element,".max-value"),this.minRangeValue=parseInt(this.minThumbNode.getAttribute("aria-valuemin"),10),this.maxRangeValue=parseInt(this.maxThumbNode.getAttribute("aria-valuemax"),10),this.commonInit(),this.maxThumbNode.addEventListener("keydown",this.handleKeyDown.bind(this)),this.maxThumbNode.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.maxThumbNode.addEventListener("focus",this.handleFocus.bind(this)),this.maxThumbNode.addEventListener("blur",this.handleBlur.bind(this)),this.valueNow=parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10),this.moveSliderTo(this.valueNow,this.minThumbNode,"min"),this.valueNow=parseInt(this.maxThumbNode.getAttribute("aria-valuenow"),10),this.moveSliderTo(this.valueNow,this.maxThumbNode,"max")}initSingleThumbSlider(){this.minThumbNode=this.base.shadowRootQuerySelector(this.element,"[range-thumb=min]"),this.rangeSliderTrack=this.base.shadowRootQuerySelector(this.element,".single-range-slider"),this.minValueNode=this.base.shadowRootQuerySelector(this.element,".single-thumb-value"),this.minRangeValue=parseInt(this.minThumbNode.getAttribute("aria-valuemin"),10),this.maxRangeValue=parseInt(this.minThumbNode.getAttribute("aria-valuemax"),10),this.rangeSliderTrack&&(this.rangeSliderTrackWidth=parseInt(window.getComputedStyle(this.rangeSliderTrack).getPropertyValue("width").slice(0,-2),10)),this.commonInit(),this.valueNow=parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10),this.moveSliderTo(this.valueNow,this.minThumbNode,"min")}moveSliderTo(i,s,t){const a=parseInt(s.getAttribute("aria-valuemax"),10),h=parseInt(s.getAttribute("aria-valuemin"),10);if(i>a&&(i=a),i<h&&(i=h),this.valueNow=i,s.setAttribute("aria-valuenow",this.valueNow),s.setAttribute("aria-valuetext",this.valueNow),"numeric-range-slider"===this.type){const a=Math.round((i-this.minRangeValue)*(this.rangeSliderTrackWidth-2*(this.thumbWidth-this.trackBorderWidth))/(this.maxRangeValue-this.minRangeValue));"min"===t?(this.maxThumbNode.setAttribute("aria-valuemin",this.valueNow.toString()),s.style.left=`${a-this.trackBorderWidth}px`,this.minValueNode.innerHTML=this.valueNow.toString()):(this.minThumbNode.setAttribute("aria-valuemax",this.valueNow.toString()),s.style.left=`${a+this.thumbWidth-this.trackBorderWidth}px`,this.maxValueNode.innerHTML=this.valueNow.toString()),this.fillMultipleThumbInnerBar()}else{const i=Math.round(this.valueNow*this.rangeSliderTrackWidth/(this.maxRangeValue-this.minRangeValue))-this.thumbWidth/2;s.style.left=`${i}px`,this.minValueNode&&(this.minValueNode.innerHTML=this.valueNow.toString()),this.fillLowerTrackInnerBar()}}render(){t.log.debug(this.element.tagName,"render()","in dxp-range-selector render() : DEVELOPMENT");const i=[a("link",{rel:"stylesheet",href:""}),[this.theme&&a("link",{rel:"stylesheet",href:""})],[this.theme&&a("link",{rel:"stylesheet",href:`${t.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-range-slider.min.css`})]];return a("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},i,a("div",{class:"slider-container"},"single-value-slider"===this.type&&a("div",{class:"single-range-slider-wrapper aria-widget-slider"},a("div",{class:"single-thumb-min-value"},this.minRangeValue),a("div",{class:"track single-range-slider"},a("div",{class:"inner-bar single-thumb-inner-bar"}),a("div",{"range-thumb":"min",role:"slider",tabindex:"0",class:"min thumb slider-thumb","aria-valuemin":this.minRangeValue,"aria-valuenow":this.value,"aria-valuetext":this.value,"aria-valuemax":this.maxRangeValue,"aria-label":this.accessibilityText})),a("div",{class:"single-thumb-max-value"},this.maxRangeValue),a("div",{class:"track-label thumb-current-value-wrapper"},a("span",{class:"single-thumb-value"},"0"))),"numeric-range-slider"===this.type&&a("div",{class:"multi-range-slider-wrapper aria-widget-slider"},a("div",{class:"track-label min-value"},"0"),a("div",{class:"track multi-range-slider"},a("div",{class:"inner-bar"}),a("div",{"range-thumb":"min",role:"slider",tabindex:"0",class:"min thumb slider-thumb","aria-valuemin":this.minRangeValue,"aria-valuenow":this.minValue,"aria-valuetext":this.minValue,"aria-valuemax":this.maxRangeValue,"aria-label":this.accessibilityText}),a("div",{"range-thumb":"max",role:"slider",tabindex:"0",class:"max thumb slider-thumb","aria-valuemin":this.minRangeValue,"aria-valuenow":this.maxValue,"aria-valuetext":this.maxValue,"aria-valuemax":this.maxRangeValue,"aria-label":this.accessibilityText})),a("div",{class:"track-label max-value"},"0"))))}get element(){return h(this)}static get style(){return"div.dxp.dxp-range-slider .slider-container{height:30px;margin-top:12px}div.dxp.dxp-range-slider .slider-container .aria-widget-slider{height:100%}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .track{border:none;position:relative;height:4px;border-radius:2px;float:left}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .slider-thumb[role=slider]{position:absolute;padding:0;margin:0;top:-.4375rem;width:1.5rem;height:1.5rem;border-radius:50%;margin-top:-.25rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .min-value{width:2rem;padding-right:1rem;float:left;position:relative;top:-.5rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .max-value{width:2rem;padding-left:1rem;float:left;position:relative;top:-.5rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .single-thumb-min-value{position:relative;top:-.5rem;width:2rem;padding-right:1rem;float:left}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .single-thumb-max-value{position:relative;top:-.5rem;width:2rem;float:left;padding-left:1rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .inner-bar{position:absolute;height:4px}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .single-thumb-inner-bar{border-radius:2px}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .thumb-current-value-wrapper{position:relative;top:-.7rem;float:left;margin-left:2rem;width:3rem;height:2rem;border-radius:1rem;text-align:center;vertical-align:middle}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .thumb-current-value-wrapper .single-thumb-value{vertical-align:middle}"}};export{r as dxp_range_slider};