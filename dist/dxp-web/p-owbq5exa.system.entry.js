var __awaiter=this&&this.__awaiter||function(t,s,i,e){function r(t){return t instanceof i?t:new i((function(s){s(t)}))}return new(i||(i=Promise))((function(i,o){function a(t){try{l(e.next(t))}catch(s){o(s)}}function n(t){try{l(e["throw"](t))}catch(s){o(s)}}function l(t){t.done?i(t.value):r(t.value).then(a,n)}l((e=e.apply(t,s||[])).next())}))};var __generator=this&&this.__generator||function(t,s){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:n(0),throw:n(1),return:n(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function n(t){return function(s){return l([t,s])}}function l(a){if(e)throw new TypeError("Generator is already executing.");while(i)try{if(e=1,r&&(o=a[0]&2?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;if(r=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(a[0]===6&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}if(o[2])i.ops.pop();i.trys.pop();continue}a=s.call(t,i)}catch(n){a=[6,n];r=0}finally{e=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-f4cc861d.system.js","./p-4b0c1219.system.js"],(function(t){"use strict";var s,i,e,r,o,a;return{setters:[function(t){s=t.r;i=t.c;e=t.d;r=t.h;o=t.g},function(t){a=t.B}],execute:function(){var n={en:{passwordCriteria:"Password criteria: ",passwordStrength:"Password strength: ",good:"Good",medium:"Medium",weak:"Weak"}};var l=t("dxp_input_password",function(){function t(t){s(this,t);this.isValid=true;this.isValidate=false;this.autoFocus=false;this.disabled=false;this.iconType="none";this.iconTypeInfo="none";this.instructionText="";this.isOptional=false;this.isRequired=false;this.minLength=0;this.progressBar=false;this.showCriteria=false;this.showTooltip=false;this.unmaskValue=false;this.validationMessage="";this.validCount=0;this.value="";this.passwordValue=i(this,"passwordValue",7)}t.prototype.componentWillLoad=function(){this.base=new a(this,e);this.base.i18Init(e,"InputPassword",n);this.iconTypeInfo=this.iconType;this.colorChoose()};t.prototype.componentDidUpdate=function(){this.colorChoose()};t.prototype.clickEvent=function(t){return __awaiter(this,void 0,void 0,(function(){var s;return __generator(this,(function(i){s=t.target;if(t.target){s=t.target.activeElement}if(s&&!s.classList.contains("tooltip-text")&&!s.classList.contains("input-icon")){this.showTooltip=false}return[2]}))}))};t.prototype.handleBlur=function(){this.showCriteria=false;this.isOptional?this.isValid=true:this.isValid=this.isRequiredProvided(this.value)};t.prototype.handleFocus=function(){this.showCriteria=true};t.prototype.handleKeyDown=function(t){var s=t.target&&t.target?t.composedPath()[0]:t.target;if(!this.isValidate){if(t.key!=="Tab"){this.isValidate=true;this.isValid=true}}if(s&&s.classList&&(t.which===13||t.which===32)){if(s.classList.contains("error-circle-red")||s.classList.contains("help-g")){this.showTooltip=!this.showTooltip}}if(t.which===9){this.showTooltip=false}};t.prototype.handleChange=function(t){return __awaiter(this,void 0,void 0,(function(){var s,i,e;return __generator(this,(function(r){if(this.isValidate){this.passwordValue.emit({value:t.target.value});this.value=t.target.value;if(this.value===""&&this.passwordCriteria){this.passwordStrength=undefined;if(this.isOptional){this.isValid=true}for(s=0,i=this.passwordCriteria;s<i.length;s++){e=i[s];e.valid=false}}else{this.isValidPassword(this.value)}}return[2]}))}))};t.prototype.checkPasswordCriteria=function(t){var s=0;for(var i=0,e=this.passwordCriteria;i<e.length;i++){var r=e[i];var o=new RegExp(r.pattern);if(t.search(o)<0){r.valid=false}else{s++;r.valid=true}}this.validCount=s;if(s===this.passwordCriteria.length){var a=this.getCurrentElement();this.iconType="success";if(a&&a.querySelector(".tooltip-text")){if(this.iconTypeInfo==="help"){a.querySelector(".tooltip-text").removeAttribute("style")}}}else{var a=this.getCurrentElement();if(a){this.iconTypeInfo==="help"?this.iconType="help":this.iconType="none"}}};t.prototype.colorChoose=function(){switch(this.passwordStrength){case e.i18n.t("InputPassword:weak"):this.statusColor=this.weakPasswordColor?this.weakPasswordColor:"#cf4500";break;case e.i18n.t("InputPassword:medium"):this.statusColor=this.mediumPasswordColor?this.mediumPasswordColor:"#ffc61e";break;case e.i18n.t("InputPassword:good"):this.statusColor=this.goodPasswordColor?this.goodPasswordColor:"#628020";break;default:this.statusColor=this.weakPasswordColor?this.weakPasswordColor:"#cf4500"}};t.prototype.errorIconClick=function(){this.showTooltip=!this.showTooltip};t.prototype.getCurrentElement=function(){return this.element?this.element:this.element};t.prototype.helpIconClick=function(){this.showTooltip=!this.showTooltip};t.prototype.isRequiredProvided=function(t){if(t===""||t.length<=this.minLength){return false}return true};t.prototype.isValidPassword=function(t){if(t!==""){this.isValidPattern(t)}};t.prototype.isValidPattern=function(t){this.strongPasswordPattern=this.strongPasswordPattern?new RegExp(this.strongPasswordPattern):undefined;this.mediumPasswordPattern=this.mediumPasswordPattern?new RegExp(this.mediumPasswordPattern):undefined;if(t.length>this.minLength){this.isValid=true}if(this.passwordCriteria){this.checkPasswordCriteria(t)}if(t!==""&&this.strongPasswordPattern&&this.strongPasswordPattern.test(t)){this.passwordStrength=e.i18n.t("InputPassword:good")}else if(t!==""&&this.mediumPasswordPattern&&this.mediumPasswordPattern.test(t)){this.passwordStrength=e.i18n.t("InputPassword:medium")}else{this.passwordStrength=e.i18n.t("InputPassword:weak")}};t.prototype.renderProgressbar=function(){var t=this;return[!this.isValid&&r("div",{class:"dxp-error","aria-label":this.validationMessage},this.validationMessage),this.progressBar&&r("div",{class:"progress"},r("dxp-progressbar",{"current-value":this.passwordStrength?this.validCount:"0","progress-color":this.statusColor,height:"5px","max-value":this.passwordCriteria.length,type:"linear","have-description":"false"})),this.progressBar&&this.passwordStrength&&this.isValid&&r("div",{class:"password-stength"},r("p",{class:"strength-text","aria-label":e.i18n.t("InputPassword:passwordStrength")},e.i18n.t("InputPassword:passwordStrength"),r("strong",null,r("span",{"aria-label":this.passwordStrength},this.passwordStrength)))),this.passwordCriteria&&this.iconType!=="success"&&this.showCriteria&&r("ul",{class:"criteria-list"},r("span",{class:"password-criteria","aria-label":e.i18n.t("InputPassword:passwordCriteria")}," ",e.i18n.t("InputPassword:passwordCriteria")),this.passwordCriteria.map((function(s){return r("li",null,r("p",{"aria-label":s.valid===true?t.instructionText+" "+s.criteria+" criteria meets the expectation":t.instructionText+" "+s.criteria+" criteria not meets the expectation"},r("i",{class:s.valid?"icon-sprite success-circle-green":"icon-sprite dot-g"}),r("span",null,s.criteria)))})))]};t.prototype.renderValidationError=function(){var t=this;return[!this.isValid&&r("span",{class:"tooltip",onClick:function(){return t.errorIconClick()}},r("span",{class:"input-icon icon-sprite error-circle-red "+(this.disabled?"disabled":""),id:"passwordErrorIcon","aria-label":this.errorIconAccessibilityText}),this.errorIconText&&r("span",{class:"tooltip-text "+(this.showTooltip?"show-tooltip":""),id:"passwordErrorText","aria-label":this.errorIconText,innerHTML:this.errorIconText})),this.iconType==="help"&&this.isValid&&r("span",{class:"tooltip",onClick:function(){return t.helpIconClick()}},r("span",{class:"input-icon icon-sprite help-g "+(this.disabled?"disabled":""),tabindex:"0",id:"passwordHelpIcon","aria-label":this.helpIconAccessibilityText}),this.helpIconText&&r("span",{class:"tooltip-text "+(this.showTooltip&&!this.disabled?"show-tooltip":""),id:"passwordHelpText","aria-label":this.helpIconText,innerHTML:this.helpIconText})),this.iconType==="success"&&this.isValid&&r("span",null,r("span",{class:"input-icon icon-sprite success-circle-green "+(this.disabled?"disabled":""),id:"passwordSuccessIcon","aria-label":this.successIconAccessibilityText}))]};t.prototype.render=function(){var t=this;e.log.debug(this.element.tagName,"render()","in dxp-input-password render() : "+"DEVELOPMENT");this.validationMessage=this.validationMessage===""?"Please enter valid password":this.validationMessage;var s=[r("link",{rel:"stylesheet",href:""}),[this.theme&&r("link",{rel:"stylesheet",href:""})],[this.theme&&r("link",{rel:"stylesheet",href:e.config.get("DXP_STYLE_BASE_URL")+"/themes/"+this.theme+"/dxp-input-password.min.css"})]];return r("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},s,this.label&&this.label.trim()!==""&&r("label",{"aria-label":this.label,class:this.disabled?"dxp-disabled dxp-inputbox-label":this.isValid?"dxp-inputbox-label":"dxp-inputbox-label dxp-error",htmlFor:this.label},this.label,this.isOptional&&r("span",null," (optional)"),this.isRequired&&r("span",{class:"dxp-required"},r("span",{"aria-hidden":"true"},"*"))),r("div",{class:"input-container"},r("input",{type:this.unmaskValue?"text":"password",id:this.contentId,class:"input-box "+(this.isValid?"":"has-error")+" "+(!this.isValid||this.iconType!=="none"?"input-with-icon":""),"aria-invalid":!this.isValid,"aria-label":this.accessibilityText,placeholder:this.placeholder,onInput:function(s){return t.handleChange(s)},disabled:this.disabled,autofocus:this.autoFocus,autocomplete:"off",onBlur:function(){return t.handleBlur()}}),this.renderValidationError()),this.renderProgressbar())};Object.defineProperty(t.prototype,"element",{get:function(){return o(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"div.dxp.dxp-input-password .input-container{position:relative;width:100%}div.dxp.dxp-input-password .dxp-inputbox-label{margin-bottom:.25rem}div.dxp.dxp-input-password .input-box{display:block;width:100%;height:2.5rem;padding:.5rem .75rem;border-radius:.25rem}div.dxp.dxp-input-password .input-box::-ms-clear{display:none}div.dxp.dxp-input-password .input-box.input-with-icon{padding-right:2.5rem}div.dxp.dxp-input-password .input-box:disabled{cursor:not-allowed}div.dxp.dxp-input-password .progress{margin:.625rem 0 .3125rem 0}div.dxp.dxp-input-password .password-stength .strength-text{margin-bottom:1.25rem;margin-top:0;line-height:1}div.dxp.dxp-input-password .input-icon{position:absolute;right:.5rem;top:.75rem}div.dxp.dxp-input-password .input-icon.disabled{pointer-events:none;opacity:.5}div.dxp.dxp-input-password .criteria-list{margin-bottom:.875rem}div.dxp.dxp-input-password .criteria-list .password-criteria{margin-bottom:.75rem;display:block}div.dxp.dxp-input-password .criteria-list li{display:block}div.dxp.dxp-input-password .criteria-list li p{position:relative;padding-left:1.5625rem;margin:0}div.dxp.dxp-input-password .criteria-list li p i{position:absolute;left:0;top:.09375rem}div.dxp.dxp-input-password .criteria-list li+li{margin-top:.625rem}div.dxp.dxp-input-password .tooltip .tooltip-text{display:block;border-radius:.3125rem;visibility:hidden;width:16.25rem;text-align:left;padding:.9375rem 1.0625rem;bottom:2rem;right:-.2rem;position:absolute;z-index:9}div.dxp.dxp-input-password .tooltip .tooltip-text:before{content:\"\";display:inline-block;width:.75rem;height:.75rem;position:absolute;bottom:-.3125rem;-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:-1}div.dxp.dxp-input-password .tooltip .tooltip-text.password-tooltip{right:auto;left:calc(100% + .625rem);bottom:auto;top:-.9375rem}div.dxp.dxp-input-password .tooltip .tooltip-text.password-tooltip:before{right:auto;left:-.3125rem;bottom:auto;top:1.0625rem}div.dxp.dxp-input-password .tooltip .show-tooltip{visibility:visible}div.dxp.dxp-input-password[dir=rtl] .input-icon{left:.75rem;right:auto}div.dxp.dxp-input-password[dir=rtl] .input-box.input-with-icon{padding-left:2.5rem;padding-right:.75rem}div.dxp.dxp-input-password[dir=rtl] .criteria-list li p{padding-right:1.5625rem;margin-left:0}div.dxp.dxp-input-password[dir=rtl] .criteria-list li p i{right:0;left:auto}div.dxp.dxp-input-password[dir=rtl] .password-stength .strength-text{direction:rtl}div.dxp.dxp-input-password[dir=rtl] .tooltip .tooltip-text{left:-.2rem;right:auto;text-align:right}div.dxp.dxp-input-password[dir=rtl] .tooltip .tooltip-text:before{right:auto;left:1.125rem}div.dxp.dxp-input-password[dir=rtl] .tooltip .tooltip-text.password-tooltip{left:auto;right:calc(100% + .625rem)}div.dxp.dxp-input-password[dir=rtl] .tooltip .tooltip-text.password-tooltip:before{left:auto;right:-.3125rem}"},enumerable:true,configurable:true});return t}())}}}));