import{r as t,d as i,h as s,g as e}from"./p-8188e849.js";import{B as o}from"./p-16d6f0ca.js";import{m as n}from"./p-135b6183.js";const r=class{constructor(i){t(this,i)}async componentWillLoad(){if(this.base=new o(this,i),this.base.i18Init(i,"SiteList",n),this.endPointUrl)try{const t=await i.api(this.endPointUrl);this.regions=t.regions}catch(e){i.log.error(this.element.tagName,"componentWillLoad()","fetch failed for",e)}const t=this.element;let s="";i.util.appendLinkElement(t,s),i.util.appendLinkElement(t,s=""),s=`${i.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-site-list.min.css`,i.util.appendLinkElement(t,s)}componentDidLoad(){const t=(this.element.querySelectorAll("dxp-accordion-item"),this.element.querySelectorAll("dxp-accordion-item"));if(t.length){const s=t[t.length-1].querySelector(".acc-label");s&&s.classList.add("acc-bottom");const e=i.util.getQueryParameterByKey("locale",window.location.href);for(const i of t)if(this.regions)for(const t of this.regions)this.setDescriptionText(i,t,e)}}routingHandler(t){this.base.routingEventListener(t)}setDescriptionText(t,s,e){if(t.getAttribute("item-title")===s.region){const e=t.querySelector(".description");e&&(e.innerHTML=s.regionalDescription?s.regionalDescription:i.i18n.t("SiteList:regionDescription",{regionalSiteLink:s.defaultSiteLink,region:s.region}),t.querySelector(".description a").setAttribute("aria-label",i.i18n.t("SiteList:defaultRegional",{region:s.defaultSiteLink})))}for(const i of s.countries)for(const o of i.locales)o.locale===e&&t.getAttribute("item-title")===s.region&&t&&t.querySelector(".acc-label").click()}render(){return i.log.debug(this.element.tagName,"render()","in dxp-site render() : DEVELOPMENT"),s("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},s("h1",null,i.i18n.t("SiteList:title")),this.regions?this.regions.map(t=>s("dxp-region",{name:t.region,"is-open":t.isOpen},t.countries.map(t=>s("dxp-country-item",{name:t.country,slot:"top"},t.locales.map(t=>s("dxp-in-language",{link:t.link,name:t.inLanguage})))),s("div",{class:"description",slot:"top"}))):s("slot",null))}get element(){return e(this)}static get style(){return""}};export{r as dxp_site_list};