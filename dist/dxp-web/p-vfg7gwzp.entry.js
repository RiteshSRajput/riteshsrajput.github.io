import{r as t,c as i,d as s,h as e,g as h}from"./p-8188e849.js";import{B as r}from"./p-16d6f0ca.js";const a=class{constructor(s){t(this,s),this.isValid=!0,this.isOptional=!1,this.maxLength=100,this.minLength=0,this.value="",this.changeText=i(this,"changeText",7)}componentWillLoad(){this.base=new r(this,s),this.value&&0===this.value.trim().length&&(this.value=this.value.trim())}handleFocus(){this.element.querySelector("textarea").setAttribute("aria-invalid","false")}handleKey(t){["Backspace","Delete"].includes(t.key)&&(this.isBackspace=!0,this.value||this.required&&(this.isValid=!1,this.element.querySelector("textarea").setAttribute("aria-invalid","true")))}routingHandler(t){this.base.routingEventListener(t)}handleChange(t){if("Tab"!==t.key&&(this.isValid=!0,this.element.querySelector("textarea").setAttribute("aria-invalid","true")),this.changeText.emit({value:t.target.value}),this.value=t.target.value,this.isBackspace&&0===this.value.length&&!this.required)return this.isValid=!0,this.element.querySelector("textarea").setAttribute("aria-invalid","true"),void(this.isBackspace=!1);if(this.value&&0===this.value.trim().length){this.value=this.value.trim();const t=[];t.push(this.isRequiredProvided(this.value)),this.isValid=t.every(t=>t)}else this.isValid=this.isValidInput(this.value)}isRequiredProvided(t){return!0===this.isOptional||""!==t}isValidInput(t){return!(0!==this.minLength&&!this.isValidMinLength(t))&&(!(0!==this.maxLength&&!this.isValidMaxLength(t))&&this.isRequiredProvided(t))}isValidMaxLength(t){return t&&""!==t&&t.length<=this.maxLength}isValidMinLength(t){return t&&""!==t&&t.length>=this.minLength}render(){s.log.debug(this.element.tagName,"render()","in dxp-textarea render() : DEVELOPMENT");const t=[e("link",{rel:"stylesheet",href:""}),[this.theme&&e("link",{rel:"stylesheet",href:""})],[this.theme&&e("link",{rel:"stylesheet",href:`${s.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-textarea.min.css`})]];return e("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,e("label",{htmlFor:this.label,id:"textarea",class:this.disabled?"dxp-disabled":this.isValid?"":"dxp-error"},this.label,this.isOptional?e("span",{class:"dxp-optional"}," (Optional)"):""),e("textarea",{id:this.label,"aria-labelledby":"textarea",spellcheck:"true",class:`${this.isValid?"":"has-error"} ${this.nonResizable?"no-resizable":""}\n          ${this.isValid||this.isOptional?"textarea form-control":"textarea form-control dxp-field-error"}`,"aria-invalid":"false","aria-multiline":"true",required:!this.isOptional,"aria-required":!this.isOptional,placeholder:this.placeholder,value:this.value,onKeyUp:t=>this.handleChange(t),rows:this.rows,cols:this.cols,maxlength:this.maxLength,minlength:this.minLength,"aria-errormessage":"error",disabled:this.disabled,style:{width:`${this.width}px`}}),this.isValid?"":e("div",{class:"dxp-error",id:"error","aria-label":this.validationMessage},this.validationMessage))}get element(){return h(this)}static get style(){return"div.dxp.dxp-textarea textarea{padding:.675rem .875rem;resize:auto}div.dxp.dxp-textarea textarea.no-resizable{resize:none}div.dxp.dxp-textarea label{font-size:.75rem;margin-bottom:.25rem;display:block}"}};export{a as dxp_textarea};