import{r as t,d as o,h as e,g as i}from"./p-8188e849.js";import{B as s}from"./p-16d6f0ca.js";const n="dxp-hide-tooltip",l=class{constructor(o){t(this,o),this.placement="bottom"}componentWillLoad(){this.base=new s(this,o)}async componentDidLoad(){await this.createTooltip()}async componentDidUpdate(){await this.createTooltip()}async componentDidUnload(){await this.destroyTooltip()}routingHandler(t){this.base.routingEventListener(t)}async createTooltip(){const t=this.element;let e=document.getElementById(this.element.getAttribute("selector-id"));if(this.element.hasAttribute("inside-shadow")&&null===e&&(e=this.element.parentElement.querySelector(`#${this.element.getAttribute("selector-id")}`)),e&&this.trigger){const t=this.trigger.split(",");for(const o of t)e.addEventListener(o.trim(),this.eventHandler)}e&&document.getElementById(`tooltip-${e.id}`)&&await this.destroyTooltip();const i=document.createElement("div");i.id=`tooltip-${e.id}`,i.className+=[this.base.componentClass(),"tool-tip",this.placement,n].join(" "),i.setAttribute("dir",this.dir),i.setAttribute("data-theme",this.theme),i.setAttribute("placement",this.placement),i.setAttribute("role","tooltip"),i.setAttribute("aria-hidden","true"),this.element.hasAttribute("inside-shadow")&&i.setAttribute("inside-shadow",`${this.element.hasAttribute("inside-shadow")}`);const s=document.createElement("div");s.id=`tooltip-container-${e.id}`,s.className+=["dxp-tooltip-container"].join(" "),s.setAttribute("dir",this.dir);const l=document.createElement("div");l.id=`tooltip-arrow-'${e.id}`,l.className+=["arrow","shadow",this.placement].join(" "),i.appendChild(l),this.setTooltipHeader(e,s);const r=document.createElement("div");if(r.id=`tooltip-content-${e.id}`,r.className+=["tooltip-content"].join(" "),r.setAttribute("dir",this.dir),r.setAttribute("placement",this.placement),this.content){const o=t.querySelector(".tooltip-content").innerHTML;r.innerHTML=o,s.appendChild(r)}else{const t=this.element.querySelector('[slot="tooltip-content"]')?this.element.querySelector('[slot="tooltip-content"]').cloneNode(!0):void 0;t&&(r.appendChild(t),s.appendChild(r))}const a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href="",i.appendChild(a),a.href=`${o.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-tooltip.min.css`,i.appendChild(a),i.appendChild(s);let p=this.getOffsetParent(e);null===p&&(p=e.ownerDocument.getElementById("body")[0]),p.appendChild(i),t.querySelector(".dxp-tooltip-container").classList.contains(n)||t.querySelector(".dxp-tooltip-container").classList.add(n)}setTooltipHeader(t,o){const e=this.element,i=document.createElement("div");if(i.id=`tooltip-container-${t.id}`,i.className+=["tooltip-header"].join(" "),i.setAttribute("dir",this.dir),this.tooltipTitle){const t=e.querySelector(".tooltip-header").innerHTML;i.innerHTML=t,o.appendChild(i)}else{const t=this.element.querySelector('[slot="tooltip-title"]')?this.element.querySelector('[slot="tooltip-title"]').cloneNode(!0):void 0;t&&(i.appendChild(t),o.appendChild(i))}}async destroyTooltip(){const t=`tooltip-${this.element.getAttribute("selector-id")}`,o=document.getElementById(t);o.parentNode.removeChild(o)}async hideTooltip(){this.actionEventHandler()}async showTooltip(){this.actionEventHandler()}async toggleTooltip(){this.actionEventHandler()}actionEventHandler(){const t=document.getElementById(this.element.getAttribute("selector-id"));this.eventHandler({target:t})}eventHandler(t){const o=t.target,e=`tooltip-${o.id}`;if(!o.id)return;const i=document.getElementById(e);let s=document.querySelector(`[selector-id=${o.id}]`);if(i&&i.hasAttribute("inside-shadow")&&null===s&&(s=o.parentElement.querySelector(`[selector-id=${o.id}]`)),i.classList.contains("dxp-show-tooltip")){o.removeAttribute("aria-describedby",e);const t=i.querySelector('[slot="tooltip-content"]');if(t){const o=s.querySelector('[slot="tooltip-content"]');o&&o.parentNode.replaceChild(t.cloneNode(!0),o)}i.classList.remove("dxp-show-tooltip"),i.classList.add(n),i.removeAttribute("style")}else{i.classList.remove(n);const t=null===i.getAttribute("placement")?"right":i.getAttribute("placement");let s,r;const a=100,p=10;let c;const h=parseFloat(window.getComputedStyle(i).getPropertyValue("height")),d=parseFloat(window.getComputedStyle(i).getPropertyValue("width")),m=parseFloat(window.getComputedStyle(i.getElementsByClassName("arrow")[0]).getPropertyValue("height")),$=parseFloat(window.getComputedStyle(i.getElementsByClassName("arrow")[0]).getPropertyValue("width"));switch(t.toLowerCase()){case"top":c={left:`${d/2-$/2}px`,bottom:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth/2-i.offsetWidth/2,r=o.offsetTop-i.offsetHeight-p;break;case"top-left":c={right:`${$/2+p/2}px`,bottom:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth-i.offsetWidth,r=o.offsetTop-i.offsetHeight-p;break;case"top-right":c={left:`${$/2+p/2}px`,bottom:`-${$/2}px`},s=o.offsetLeft,r=o.offsetTop-i.offsetHeight-p;break;case"right":c={top:`${h/2-m/2}px`,left:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth+p,r=o.offsetTop+o.offsetHeight/2-i.offsetHeight/2;break;case"right-top":c={bottom:`${m/2+p/2}px`,left:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth+p,r=o.offsetTop+o.offsetHeight-i.offsetHeight;break;case"right-bottom":c={top:`${m/2+p/2}px`,left:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth+p,r=o.offsetTop;break;case"left":c={top:`${h/2-m/2}px`,right:`-${$/2}px`},s=-1===Math.sign(o.offsetLeft-i.offsetWidth)?-i.offsetWidth+o.offsetLeft-p:o.offsetLeft-i.offsetWidth-p,r=o.offsetTop+o.offsetHeight/2-i.offsetHeight/2;break;case"left-top":c={bottom:`${m/2+p/2}px`,right:`-${$/2}px`},s=-1===Math.sign(o.offsetLeft-i.offsetWidth)?-i.offsetWidth+o.offsetLeft-p:o.offsetLeft-i.offsetWidth-p,r=o.offsetTop+o.offsetHeight-i.offsetHeight;break;case"left-bottom":c={top:`${m/2+p/2}px`,right:`-${$/2}px`},s=-1===Math.sign(o.offsetLeft-i.offsetWidth)?-i.offsetWidth+o.offsetLeft-p:o.offsetLeft-i.offsetWidth-p,r=o.offsetTop;break;case"bottom":c={left:`${d/2-$/2}px`,top:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth/2-i.offsetWidth/2,r=o.offsetTop+o.offsetHeight+p;break;case"bottom-left":c={right:`${0+$/2+p/2}px`,top:`-${$/2}px`},s=o.offsetLeft+o.offsetWidth-i.offsetWidth,r=o.offsetTop+o.offsetHeight+p;break;case"bottom-right":c={left:`${0+$/2+p/2}px`,top:`-${$/2}px`},s=o.offsetLeft,r=o.offsetTop+o.offsetHeight+p}const x={"will-change":"transform",top:"0px",left:"0px",position:"absolute",visibility:"visible",transform:`translate3d(${s}px, ${r}px, ${a}px)`};function l(t){return Object.entries(t).reduce((t,[o,e])=>`${t}${o}:${e};`,"")}i.classList.add("dxp-show-tooltip"),i.classList.remove(n),i.setAttribute("aria-hidden","false"),i.setAttribute("style",l(x)),i.querySelector(".arrow").setAttribute("style",l(c)),o.setAttribute("aria-describedby",e)}}getOffsetParent(t){if(!t)return document.documentElement;let o=t.offsetParent||null;for(;null===o&&t.nextElementSibling;)o=(t=t.nextElementSibling).offsetParent;const e=o&&o.nodeName;return e&&"BODY"!==e&&"HTML"!==e?-1!==["TH","TD","TABLE"].indexOf(o.nodeName)&&"static"===this.getStyleComputedProperty(o,"position")?this.getOffsetParent(o):o:t?t.ownerDocument.documentElement:document.documentElement}getStyleComputedProperty(t,o){if(1!==t.nodeType)return[];const e=t.ownerDocument.defaultView.getComputedStyle(t,null);return o?e[o]:e}insertAfter(t,o){o.parentNode.insertBefore(t,o.nextSibling)}insertBefore(t,o){o.parentNode.insertBefore(t,o)}render(){o.log.debug(this.element.tagName,"render()","in dxp-tooltip render() : DEVELOPMENT");const t=[e("link",{rel:"stylesheet",href:""}),[this.theme&&e("link",{rel:"stylesheet",href:""})],[this.theme&&e("link",{rel:"stylesheet",href:`${o.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-tooltip.min.css`})]];return e("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,e("div",{role:"tooltip",class:"dxp-tooltip-container"},e("div",{class:"tooltip-header"},void 0!==this.tooltipTitle?e("h3",{class:"text",innerHTML:this.tooltipTitle}):e("slot",{name:"tooltip-title"})),e("div",{class:"tooltip-content"},void 0!==this.content?e("p",{class:"text",innerHTML:this.content}):e("slot",{name:"tooltip-content"}))))}get element(){return i(this)}};export{l as dxp_tooltip};