import{r as t,d as i,h as s,g as e}from"./p-8188e849.js";import{B as r}from"./p-16d6f0ca.js";import{m as h}from"./p-fc1bc7e8.js";const d="dxp-breadcrumb-item",n=class{constructor(i){t(this,i),this.hideCurrentPage=!1,this.navStartLevel=0,this.rootSitePath="",this.showHiddenNavItems=!1}breadcrumbItemsChange(){this.dataLookup=this.breadcrumbItemsData,this.currentRouteUrl=this.getUrl(),this.buildBreadcrumbItems()}async componentWillLoad(){this.base=new r(this,i),this.base.i18Init(i,"Breadcrumb",h),document.querySelector("dxp-breadcrumb")&&(this.childCount=document.querySelector("dxp-breadcrumb").children.length),this.breadcrumbItemsData?(this.dataLookup=this.breadcrumbItemsData,this.currentRouteUrl=this.getUrl(),this.buildBreadcrumbItems()):this.apiUrl&&(this.dataLookup=await this.getData(),this.dataLookup=this.dataLookup.pagesData,this.currentRouteUrl=this.getUrl(),this.buildBreadcrumbItems())}componentDidLoad(){if(this.hideItemsOnMobile(),!this.breadcrumbItems){const t=this.element.querySelectorAll(d);for(const i of Object.keys(t))t[i].querySelector("li").style.zIndex=t.length-(Number(i)+1);t[t.length-1].querySelector("li").classList.add("current-page")}const t=this.base.shadowRootQuerySelector(this.element,d);t&&(this.base.shadowRootQuerySelector(t,"li").style.paddingLeft="0px")}handleResizeEvent(){const t=window.innerWidth;if(t>767){this.element.querySelector(d).querySelector("li").classList.remove("dxp-hidden-md-down");const t=this.element.querySelectorAll(".dxp-hidden-md-down");for(const s of t)s.classList.remove("dxp-hidden-md-down");const i=this.element.querySelectorAll(d);for(const s of i)s.classList.remove("dxp-hidden-md-down")}else t<767&&this.hideItemsOnMobile()}onpopstate(){this.applicationName&&(this.currentRouteUrl=this.getUrl(),this.buildBreadcrumbItems())}routingHandler(t){this.base.routingEventListener(t)}async refreshBreadcrumbItems(){this.currentRouteUrl=this.getUrl(),this.buildBreadcrumbItems()}buildBreadcrumbItems(){this.breadcrumbItems=[];const t=this.getRouteArray();let i,s=this.dataLookup;t.forEach((t,e)=>{s&&s.length>0&&(i=0!==e?`${i}/${t}`:t,s=this.searchAndAddItem(t.toLowerCase(),i,s,e))})}getData(){try{return i.api(this.apiUrl)}catch(t){i.log.error(this.element.tagName,"getData()","fetch failed for",t)}}getRouteArray(){let t=[];if(this.currentRouteUrl){const i=this.currentRouteUrl.indexOf("#");t=-1!==i?this.currentRouteUrl.substr(i+2).split("/"):this.currentRouteUrl.substr(1).split("/")}return t}getUrl(){let t;return(t=location.hash.length>0?location.hash:-1!==location.pathname.indexOf(".")?location.pathname.split(".")[0]:location.pathname).replace(this.rootSitePath,"")}hideItemsOnMobile(){if(window.innerWidth<767){const t=this.element.querySelectorAll(d),i=this.element.querySelectorAll(d);this.element.querySelector(d).querySelector("li").classList.add("dxp-hidden-md-down");for(let s=0;s<t.length-2;s++)t[s].classList.add("dxp-hidden-md-down");if(i)for(let s=0;s<i.length-2;s++)i[s].querySelector(".dxp-breadcrumb-item").classList.add("dxp-hidden-md-down")}}searchAndAddItem(t,i,s,e){let r=[];const h=t.indexOf("?")>=0?t.substring(0,t.indexOf("?")):t;return s.find(t=>{if(t.linkId.toLowerCase()===h){const s={link:t.link,linkId:t.linkId,routePath:i,title:t.title,showNavItem:!!this.showHiddenNavItems||!JSON.parse(t.hideInNav)};return e>=this.navStartLevel&&this.breadcrumbItems.push(s),t.child&&(r=t.child),r}}),r}render(){i.log.debug(this.element.tagName,"render()","in dxp-breadcrumb render() : DEVELOPMENT");const t=[s("link",{rel:"stylesheet",href:`${i.config.get("DXP_STYLE_BASE_URL")}/dxp.min.css`}),[this.theme&&s("link",{rel:"stylesheet",href:`${i.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/${this.theme}.min.css`})],[this.theme&&s("link",{rel:"stylesheet",href:`${i.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-breadcrumb.min.css`})]];return s("div",{class:`${this.base.componentClass()} breadcrumb-nav`,dir:this.dir,"data-theme":this.theme},t,s("nav",{"aria-label":i.i18n.t("Breadcrumb:label")},s("ul",{class:"dxp-breadcrumb-list sc-dxp-breadcrumb"},this.breadcrumbItems&&s("dxp-breadcrumb-item",{"index-val":this.breadcrumbItems.length,link:location.origin,"accessibility-text":"Home","link-title":"Home"}),this.breadcrumbItems?this.breadcrumbItems.map((t,i)=>{if(t.showNavItem)return s("dxp-breadcrumb-item",{"index-val":this.breadcrumbItems.length-(i+1),"is-current-page":i===this.breadcrumbItems.length-1,link:t.link,"accessibility-text":t.title,"link-title":t.title,"hide-current-page":this.hideCurrentPage})}):[this.childCount&&s("dxp-breadcrumb-item",{link:"#","accessibility-text":`${i.i18n.t("Breadcrumb:Home")}`,"link-title":`${i.i18n.t("Breadcrumb:Home")}`}),s("slot",null)])))}get element(){return e(this)}static get watchers(){return{breadcrumbItemsData:["breadcrumbItemsChange"]}}static get style(){return"div.dxp.dxp-breadcrumb{padding:30px 0 32px 0}div.dxp.dxp-breadcrumb.breadcrumb-nav .dxp-breadcrumb-list{display:-ms-flexbox;display:flex;margin:0;-ms-flex-align:center;align-items:center}div.dxp.dxp-breadcrumb.breadcrumb-nav dxp-breadcrumb-item:last-child li:hover{background:none}\@media (-ms-high-contrast:none){div.dxp.dxp-breadcrumb .dxp-breadcrumb-item.sc-dxp-breadcrumb a,div.dxp.dxp-breadcrumb .dxp-breadcrumb-item span,div.dxp.dxp-breadcrumb ::-ms-backdrop{padding-top:18px}}\@media screen and (max-width:767px){div.dxp.dxp-breadcrumb .dxp-breadcrumb-item div li{padding-left:10px}div.dxp.dxp-breadcrumb .dxp-breadcrumb-item div li a{position:relative}div.dxp.dxp-breadcrumb .dxp-breadcrumb-item div li a:after,div.dxp.dxp-breadcrumb .dxp-breadcrumb-item div li a:before{content:\"\";display:block;position:relative;width:10px;height:1px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);top:-3px}div.dxp.dxp-breadcrumb .dxp-breadcrumb-item div li a:after{-webkit-transform:rotate(45deg);transform:rotate(45deg);top:3px}div.dxp.dxp-breadcrumb .dxp-breadcrumb-item div li a span{display:none}div.dxp.dxp-breadcrumb .dxp-breadcrumb-item.sc-dxp-breadcrumb a,div.dxp.dxp-breadcrumb .dxp-breadcrumb-item span,div.dxp.dxp-breadcrumb ::-ms-backdrop{padding-top:6px}}"}};export{n as dxp_breadcrumb};