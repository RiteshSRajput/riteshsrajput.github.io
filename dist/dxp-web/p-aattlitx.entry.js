import{r as s,d as t,h as i,g as e}from"./p-8188e849.js";import{B as h}from"./p-16d6f0ca.js";import{m as r}from"./p-b81ef9ac.js";const a=class{constructor(t){s(this,t),this.curIndex=0,this.delayNextProgressBar=0,this.autoplay=!0,this.pauseDuration=6e3}componentWillLoad(){this.base=new h(this,t),this.base.i18Init(t,"ImageCarousel",r),this.carouselData&&"string"==typeof this.carouselData&&(this.carouselData=JSON.parse(this.carouselData)),this.slideReveal=this.pauseDuration/5}componentDidLoad(){this.dxpCarouselSlide=this.findElements(this.element,"dxp-image-slide",!0);const s=[];let t=!1;if(this.dxpCarouselSlide)for(const i of Object.keys(this.dxpCarouselSlide))this.findElements(this.dxpCarouselSlide[i],"dxp-image").componentOnReady().then(i=>{this.totalSlides.innerHTML=(this.dxpCarouselSlide.length<10?"0":"")+this.dxpCarouselSlide.length,this.applyWidthOnDxpImg();const e=this.findElements(i,"img");s.push(e),t||(t=!0,s[0].addEventListener("load",()=>{s[0].style.width="100%",this.wrapDxpImg(),this.slideShow(void 0),this.carouselContainer.style.height=`${this.slides[0].offsetHeight}px`,s[0].style.removeProperty("width")},!1))})}resizeEventHandler(){this.applyWidthOnDxpImg(),this.carouselContainer.style.height=`${this.slides[0].offsetHeight}px`}applyWidthOnDxpImg(){for(const s of Object.keys(this.dxpCarouselSlide))this.dxpCarouselSlide[s].style.display="block",this.dxpCarouselSlide[s].style.width=`${this.carouselContainer.offsetWidth}px`}findElements(s,t,i=!1){return i?s.querySelectorAll(t).length?s.querySelectorAll(t):s.querySelectorAll(t).length?s.querySelectorAll(t):void 0:s&&s.querySelector(t)?s.querySelector(t):s&&s&&s.querySelector(t)}getArrayFromNodeList(s){return[].slice.call(s)}hideSlide(s){s.setAttribute("data-visible","false"),s.style.transitionDelay=`${this.slideReveal}ms`,s.style.opacity="0",s.style.width="0",s.style.zIndex="0",s.style.transform="translateX(-100px)"}nextSlide(s){if(!s.code||"space"===s.code.toLowerCase()||"enter"===s.code.toLowerCase()||"numpadenter"===s.code.toLowerCase()){let s=this.index;s++,clearInterval(this.clrInterval),this.slideShow(s>this.slides.length-1?0:s)}}prevSlide(s){if(!s.code||"space"===s.code.toLowerCase()||"enter"===s.code.toLowerCase()||"numpadenter"===s.code.toLowerCase()){let s=this.index;s--,clearInterval(this.clrInterval),this.slideShow(s<0?this.slides.length-1:s)}}revealSlide(s){const t=s.getAttribute("data-index");let i=0;s.setAttribute("data-visible","true"),s.style.transitionDelay="",s.style.opacity=1,s.style.width="100%",s.style.zIndex=1,s.style.transform="translateX(0px)",this.activeSlide.innerHTML=`${Number(t)+1<10?"0":""}${Number(t)+1} / `,this.delayNextProgressBar&&(this.carouselProgressbar.style.transition=`width ${this.slideReveal}ms`,this.carouselProgressbar.style.width="0",this.carouselProgressbar.classList.remove("left"),this.carouselProgressbar.classList.add("right"),i=2*this.slideReveal),setTimeout(()=>{this.carouselProgressbar.style.transition=`width ${this.pauseDuration-i}ms`,this.carouselProgressbar.style.transitionDelay=`${this.delayNextProgressBar}ms`,this.carouselProgressbar.classList.remove("right"),this.carouselProgressbar.classList.add("left"),this.carouselProgressbar.style.width="100%"},this.delayNextProgressBar)}slideShow(s){if(this.index=this.curIndex,s>-1){const t=this.findElements(this.element,'[data-visible="true"]');this.hideSlide(t),this.curIndex=s,this.index=this.curIndex}this.revealSlide(this.slides[this.curIndex]);const t=this.curIndex;this.curIndex++,this.curIndex===this.slides.length&&(this.curIndex=0),this.autoplay&&(this.clrInterval=setTimeout(()=>{this.hideSlide(this.slides[t]),this.delayNextProgressBar=this.slideReveal,this.slideShow(void 0)},this.pauseDuration))}wrapDxpImg(){for(const s of Object.keys(this.dxpCarouselSlide)){const t=this.dxpCarouselSlide[s].parentElement,i=document.createElement("div");i.classList.add("image-wrapper"),i.classList.add("sc-dxp-image-carousel"),i.appendChild(this.dxpCarouselSlide[s]),i.appendChild(this.dxpCarouselSlide[s]),t.appendChild(i)}this.slides=this.findElements(this.element,".image-wrapper",!0);for(const s of Object.keys(this.slides))this.slides[s].setAttribute("data-index",s),this.slides[s].style.transition=`transform ${this.slideReveal}ms, opacity 0ms, width ${this.slideReveal}ms`}render(){t.log.debug(this.element.tagName,"render()","in dxp-image-carousel render() : DEVELOPMENT");const s=[i("link",{rel:"stylesheet",href:""}),[this.theme&&i("link",{rel:"stylesheet",href:""})],[this.theme&&i("link",{rel:"stylesheet",href:`${t.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-image-carousel.min.css`})]];return i("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},s,i("div",{class:"carousel-container",tabindex:"0",ref:s=>this.carouselContainer=s},this.carouselData?this.carouselData.map(s=>i("dxp-image-slide",{"eyebrow-title":s["eyebrow-title"],"slide-caption":s["slide-caption"],"sub-title":s["sub-title"],src:s.src,alt:s.alt,"image-title":s["image-title"]})):i("slot",null)),i("div",{class:"bar-container"},i("div",{class:"carousel-progress-values dxp-eyebrow-lg"},i("span",{class:"current-value",ref:s=>this.activeSlide=s}," /"),i("span",{class:"max-value",ref:s=>this.totalSlides=s})),i("div",{class:"carousel-progress-bar"},i("div",{class:"carousel-current-progress",ref:s=>this.carouselProgressbar=s})),i("div",{class:"arrow-container"},i("div",{class:"prev-arrow",role:"button","aria-label":t.i18n.t("ImageCarousel:prev"),tabindex:"0",onClick:s=>this.prevSlide(s),onKeyPress:s=>this.prevSlide(s),ref:s=>this.prev=s}),i("div",{class:"next-arrow",role:"button","aria-label":t.i18n.t("ImageCarousel:next"),tabindex:"0",onClick:s=>this.nextSlide(s),onKeyPress:s=>this.nextSlide(s),ref:s=>this.next=s}))))}get element(){return e(this)}static get style(){return"div.dxp.dxp-image-carousel{position:relative;overflow:hidden}div.dxp.dxp-image-carousel .carousel-container{height:0}div.dxp.dxp-image-carousel .image-wrapper{-webkit-transform:translateX(0);transform:translateX(0);opacity:0;position:absolute;top:0;overflow:hidden}div.dxp.dxp-image-carousel .image-wrapper:not(:first-child){width:0;-webkit-transform:translateX(-100px);transform:translateX(-100px)}div.dxp.dxp-image-carousel ::slotted(.image-wrapper){position:absolute;top:0;overflow:hidden}div.dxp.dxp-image-carousel ::slotted(.image-wrapper:not(:first-child)){width:0;-webkit-transform:translateX(-100px);transform:translateX(-100px)}div.dxp.dxp-image-carousel .nav-controls{position:absolute;z-index:10;right:0;left:0}div.dxp.dxp-image-carousel .bar-container{max-width:808px;margin:24px auto 0}div.dxp.dxp-image-carousel .bar-container>div{float:left}div.dxp.dxp-image-carousel .bar-container>div:last-child{float:right}div.dxp.dxp-image-carousel .bar-container:after{content:\"\";display:block;clear:both}div.dxp.dxp-image-carousel .carousel-progress-bar{position:relative;margin-left:16px;margin-top:12px;width:calc(100% - 135px);height:1px}div.dxp.dxp-image-carousel .carousel-current-progress{position:absolute;height:1px;width:0}div.dxp.dxp-image-carousel .arrow-container{display:-ms-flexbox;display:flex;margin-left:auto;margin-top:0;padding-bottom:1px;padding-right:1px}div.dxp.dxp-image-carousel .next-arrow,div.dxp.dxp-image-carousel .prev-arrow{display:inline-block;width:24px;height:24px;cursor:pointer}div.dxp.dxp-image-carousel .next-arrow{margin-left:12px}div.dxp.dxp-image-carousel .right{right:0}div.dxp.dxp-image-carousel .left{left:0}div.dxp.dxp-image-carousel .thumbnails{text-align:center}div.dxp.dxp-image-carousel .thumbnails .thumbnail{overflow:hidden;cursor:pointer;display:inline-block;width:90px;height:40px;margin:7px 3px}\@media (min-width:768px){div.dxp.dxp-image-carousel .carousel-progress-bar{width:calc(100% - 220px);margin-left:48px}div.dxp.dxp-image-carousel .next-arrow{margin-left:32px}}div.dxp.dxp-image-carousel[dir=rtl] .next{left:0;right:auto}div.dxp.dxp-image-carousel[dir=rtl] .carousel-progress-bar{margin-left:0;margin-right:16px}\@media (min-width:768px){div.dxp.dxp-image-carousel[dir=rtl] .carousel-progress-bar{margin-left:0;margin-right:48px}div.dxp.dxp-image-carousel[dir=rtl] .next-arrow{margin-left:0;margin-right:32px}}"}};export{a as dxp_image_carousel};