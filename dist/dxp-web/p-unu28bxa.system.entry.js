var __awaiter=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return l([e,t])}}function l(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(s=a[0]&2?r["return"]:a[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;if(r=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;r=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(a[0]===6&&n.label<s[1]){n.label=s[1];s=a;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(a);break}if(s[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(o){a=[6,o];r=0}finally{i=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-f4cc861d.system.js","./p-4b0c1219.system.js","./p-07586e87.system.js"],(function(e){"use strict";var t,n,i,r,s,a;return{setters:[function(e){t=e.r;n=e.d;i=e.h;r=e.g},function(e){s=e.B},function(e){a=e.m}],execute:function(){var o="dxp-in-page-nav-item";var l=".dxp-in-page-nav";var c=".dxp-in-page-nav-item";var u=e("dxp_in_page_nav",function(){function e(e){t(this,e)}e.prototype.dataChangeHandler=function(){this.base.createNestedMarkup(this.itemContainer,o,this.inPageNavItemsData)};e.prototype.componentWillLoad=function(){this.base=new s(this,n);this.base.i18Init(n,"InPageNav",a);var e=this.element?this.element:this.element;var t="";n.util.appendLinkElement(e,t);t=n.config.get("DXP_STYLE_BASE_URL")+"/themes/"+this.theme+".min.css";n.util.appendLinkElement(e,t)};e.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.dataChangeHandler();e=this.element?this.element.querySelector(l):this.element.querySelector(l);this.NAV_HEIGHT=this.clientHeight(e);this.NAV_OFFSET_TOP=e["offsetTop"];this.navItems=this.element.querySelectorAll(o).length?this.element.querySelectorAll(o):this.element.querySelectorAll(o);return[4,this.handleScroll()];case 1:t.sent();return[2]}}))}))};e.prototype.handleScroll=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,r,s,a,o,c,u,h,f,d,p,g;return __generator(this,(function(m){switch(m.label){case 0:t=0;m.label=1;case 1:if(!(t<this.navItems.length))return[3,8];if(!(t===this.navItems.length-1))return[3,3];r=this.checkViewPort;a=(s=document).querySelector;return[4,this.navItems[t].getHref()];case 2:i=r.apply(this,[a.apply(s,[m.sent()]),undefined]);return[3,6];case 3:o=this.checkViewPort;u=(c=document).querySelector;return[4,this.navItems[t].getHref()];case 4:h=[u.apply(c,[m.sent()])];d=(f=document).querySelector;return[4,this.navItems[t+1].getHref()];case 5:i=o.apply(this,h.concat([d.apply(f,[m.sent()])]));m.label=6;case 6:n=i;if(n&&!e){this.navItems[t].setAttribute("active",true);e=true}else{this.navItems[t].setAttribute("active",false)}m.label=7;case 7:t++;return[3,1];case 8:if(!(window.innerWidth<767&&!e))return[3,10];return[4,this.navItems[0].setActive()];case 9:m.sent();m.label=10;case 10:p=this.element?this.element.querySelector("nav"):this.element.querySelector("nav");g=this.element?this.element.querySelector(l):this.element.querySelector(l);if(p){if(window.pageYOffset>p.offsetTop){p.classList.add("fixed");g.classList.add("fixed")}if(window.pageYOffset<=this.NAV_OFFSET_TOP){p.classList.remove("fixed");g.classList.remove("fixed")}}return[2]}}))}))};e.prototype.routingHandler=function(e){this.base.routingEventListener(e)};e.prototype.checkViewPort=function(e,t){if(t){return e.getBoundingClientRect().top<this.NAV_HEIGHT+window.innerHeight/2&&t.getBoundingClientRect().top>this.NAV_HEIGHT+window.innerHeight/2}return e.getBoundingClientRect().top<this.NAV_HEIGHT+window.innerHeight/2&&Number.MAX_VALUE>this.NAV_HEIGHT+window.innerHeight/2};e.prototype.clientHeight=function(e){return e.clientHeight};e.prototype.toggleNavDropdown=function(){var e=this;if(window.innerWidth<=767){var t=this.element.querySelector(".triangle")||this.element.querySelector(".triangle");if(t.classList.contains("up")){t.classList.remove("up");t.classList.add("down")}else{t.classList.add("up");t.classList.remove("down")}this.navItems.forEach((function(t){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:t.querySelector(c).classList.toggle("dxp-block");return[4,t.getActive()];case 1:if(e.sent()){t.querySelector(c).classList.add("bg-white")}else{t.querySelector(c).classList.remove("bg-white")}return[2]}}))}))}))}};e.prototype.render=function(){var e=this;n.log.debug(this.element.tagName,"render()","in dxp-in-page-nav render() : "+"DEVELOPMENT");var t=[i("link",{rel:"stylesheet",href:""}),[this.theme&&i("link",{rel:"stylesheet",href:""})],[this.theme&&i("link",{rel:"stylesheet",href:n.config.get("DXP_STYLE_BASE_URL")+"/themes/"+this.theme+"/dxp-in-page-nav.min.css"})]];return i("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},t,i("nav",null,i("ul",{class:"nav-list",role:"menu",onClick:function(){return e.toggleNavDropdown()}},i("div",{ref:function(t){return e.itemContainer=t}},i("slot",null))),i("div",{class:"triangle down",onClick:function(){return e.toggleNavDropdown()}})))};Object.defineProperty(e.prototype,"element",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{inPageNavItemsData:["dataChangeHandler"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"div.dxp.dxp-in-page-nav{text-align:center;z-index:2}div.dxp.dxp-in-page-nav nav{width:100%;min-height:55px;z-index:1}div.dxp.dxp-in-page-nav nav .nav-list{margin:0}div.dxp.dxp-in-page-nav .fixed{position:fixed;top:0;left:0;-webkit-box-shadow:0 4px 6px 0 rgba(20,20,19,.1);box-shadow:0 4px 6px 0 rgba(20,20,19,.1);z-index:10}div.dxp.dxp-in-page-nav .triangle.down,div.dxp.dxp-in-page-nav .triangle.up{border-top:0}\@media screen and (min-width:320px) and (max-width:767px){div.dxp.dxp-in-page-nav{z-index:2}div.dxp.dxp-in-page-nav .triangle{display:inline-block;margin:0 5px;vertical-align:middle;position:absolute;right:20px;width:0;height:9px}div.dxp.dxp-in-page-nav .triangle.up{border-left:8px solid transparent;border-right:8px solid transparent;margin-top:24px}div.dxp.dxp-in-page-nav .triangle.down{border-left:8px solid transparent;border-right:8px solid transparent;margin-top:28px}div.dxp.dxp-in-page-nav nav{width:100%;min-height:55px;position:relative}div.dxp.dxp-in-page-nav nav .nav-list{width:100%;float:left;padding:0}div.dxp.dxp-in-page-nav.fixed{position:fixed;top:0;left:0}}"},enumerable:true,configurable:true});return e}())}}}));