import{r as t,c as i,d as s,h as e,g as n}from"./p-8188e849.js";import{B as a}from"./p-16d6f0ca.js";import{C as l}from"./p-0661f61b.js";const c=class{constructor(s){t(this,s),this.navHeaderClicked=i(this,"navHeaderClicked",7),this.childClickEvent=i(this,"childClickEvent",7)}navGroupHandler(){this.base.createNestedMarkup(this.navGroupContainer,"dxp-nav-item-content",this.child)}quickLinksHandler(){if(this.quickLinks.length>0){for(const t of this.quickLinks)if(t.quickLinkDescription){t["title-text"]=t.quickLinkDescription,t.orientation="vertical";for(const i of t.ctaList)i.title&&(i.text=i.title,i.type="link",i.src=i.image,i.href=i.link,i.alt=i.imageAltText,i["icon-align"]="left")}this.quickLinks[0].titleStyle="dxp-title-sm",this.quickLinks[0].orientation="vertical"}this.base.createNestedMarkup(this.quickLinksContainer,"dxp-cta-list",this.quickLinks)}componentWillLoad(){this.base=new a(this,s),this.utility=new l}async componentDidLoad(){this.quickLinks&&this.quickLinksHandler(),this.child&&this.navGroupHandler(),await this.defaultActionOnFocus()}async componentDidUpdate(){await this.defaultActionOnFocus()}async defaultActionOnFocus(){const t=[],i=this.element.parentElement.querySelectorAll("dxp-nav-menu"),s=this.element.querySelector("dxp-cta-list");let e;if(s&&(await s.componentOnReady().then(t=>{if(t){const i=t.querySelector("p");i.classList.add("dxp-hidden-md-down"),i.classList.add("dxp-lg-block"),t.querySelector("dxp-cta"),e=t.querySelectorAll("dxp-cta")}}),e&&e.length))for(const n of e)await n.componentOnReady().then(t=>{t.querySelector("a").setAttribute("tabindex","-1")});for(const n of i){const i=n.querySelector("li.nav-item-li");t.push(i)}this.utility.setPosNSize(t)}parentNavHandler(){const t=(this.element.querySelector("li"),this.element.querySelector("li"));this.overlayBgImage?this.utility.openOverlay(t,this.overlayBgImage):this.utility.openOverlay(t),this.navHeaderClicked.emit(t)}preventDefaultBehaviour(t,i){-1!==[32,37,38,39,40].indexOf(t)&&i.preventDefault()}focusElement(t){t.focus()}clickEventHandler(t){this.base.routingEventListener(t),this.childClickEvent.emit(t.target)}showHideMenuWithKeyDown(t){const i=t.target?t.composedPath()[0]:t.target,s=i.classList.contains("nav-item"),e=i.getRootNode&&i.getRootNode().host?i.getRootNode().host.closest("dxp-nav"):i.closest("dxp-nav"),n=e&&e?e.querySelector(".dxp-icon-close"):e&&e.querySelector(".dxp-icon-close"),a=i.getAttribute("aria-expanded"),l=this.element.querySelector("dxp-cta-list"),c=i.closest("dxp-cta"),h=c&&c.nextElementSibling||i.getRootNode&&i.getRootNode().host&&"DXP-CTA"===i.getRootNode().host.nodeName&&i.getRootNode().host.nextElementSibling,o=c&&c.previousElementSibling||i.getRootNode&&i.getRootNode().host&&"DXP-CTA"===i.getRootNode().host.nodeName&&i.getRootNode().host.previousElementSibling,r=c&&!c.nextElementSibling||i.getRootNode&&i.getRootNode().host&&"DXP-CTA"===i.getRootNode().host.nodeName&&!i.getRootNode().host.nextElementSibling,d=i.classList.contains("sub-nav-item"),p=this.element.querySelector(".sub-nav-item"),u=i.closest("dxp-nav-item-content"),f=u&&u.nextElementSibling,v=u&&u.previousElementSibling,x=t.keyCode,m=i.closest(".dxp-cta");if(this.preventDefaultBehaviour(x,t),!s||13!==x&&32!==x||this.parentNavHandler(),9===x&&(i.getRootNode&&i.getRootNode.host&&"DXP-CTA"===i.getRootNode().host.nodeName||c))this.parentNavHandler();else{if((m||d)&&9===x&&this.parentNavHandler(),!s||"true"!==a||9!==x&&27!==x||this.parentNavHandler(),s&&"true"===a&&(40===x||38===x)){let t,i;if(l&&(l.querySelector("dxp-cta"),i=(t=l.querySelector("dxp-cta")).querySelector("a")),i)return void this.focusElement(i);p&&this.focusElement(p)}if(40===x&&h){const t=h.querySelector("a");if(t)return void this.focusElement(t)}if(38===x&&o){let t;if(o&&(t=o.querySelector("a")),t)return void this.focusElement(t)}if(r&&40===x){const t=this.subNavChildContainer.querySelector(".sub-nav-item");if(t)return void this.focusElement(t);e&&this.focusElement(n)}if(i&&d&&f&&40===x){const t=f.querySelector(".sub-nav-item");t&&this.focusElement(t)}if(i&&d&&v&&38===x){const t=v.querySelector(".sub-nav-item");t&&this.focusElement(t)}if(i&&d&&!f&&40===x&&this.focusElement(n),i&&d&&!v&&38===x&&this.subNavChildContainer){const t=this.subNavChildContainer.querySelector("dxp-cta-list"),i=(t&&t.querySelector("dxp-cta"),t.querySelectorAll("dxp-cta")),s=i&&i[i.length-1]?i[i.length-1].querySelector("a"):i&&i[i.length-1].querySelector("a");s&&this.focusElement(s)}!s||"true"===a||40!==x&&38!==x||this.parentNavHandler()}}render(){s.log.debug("in dxp-nav-menu render() : DEVELOPMENT");const t=[e("link",{rel:"stylesheet",href:""}),[this.theme&&e("link",{rel:"stylesheet",href:""})],[this.theme&&e("link",{rel:"stylesheet",href:`${s.config.get("DXP_STYLE_BASE_URL")}/themes/${this.theme}/dxp-nav.min.css`})]];return e("li",{class:`nav-item-li ${this.base.componentClass()}`,dir:this.dir,"data-theme":this.theme,role:"menu"},t,e("span",{class:"nav-item h5",tabindex:"0",onClick:()=>{this.parentNavHandler()},role:"menuitem","aria-haspopup":"true","aria-label":this.accessibilityText?this.accessibilityText:this.linkTitle},this.navigationTitle),e("div",{class:"sub-nav-child-container",ref:t=>this.subNavChildContainer=t},e("div",{class:"quick-links-container dxp-col-lg-3",ref:t=>this.quickLinksContainer=t},e("slot",null),"Â "),this.child&&e("div",{ref:t=>this.groupContainer=t,class:"group-container dxp-col-lg-4 dxp-col-offset-lg-1"},e("dxp-nav-item-container",null,e("div",{class:"dxp-scrollable-container"},e("div",{class:"dxp-scrollable"},e("ul",{ref:t=>this.navGroupContainer=t},e("slot",null)))))),!this.child&&e("div",{ref:t=>this.groupContainer=t,class:"group-container dxp-col-lg-4 dxp-col-offset-lg-1"},e("div",{class:"dxp-scrollable-container"},e("div",{class:"dxp-scrollable"},e("ul",null,e("slot",{name:"group-content"})))))))}get element(){return n(this)}static get watchers(){return{child:["navGroupHandler"],quickLinks:["quickLinksHandler"]}}static get style(){return"li.dxp.dxp-nav-menu{background:none;padding:.8rem 0}li.dxp.dxp-nav-menu>a,li.dxp.dxp-nav-menu>span{margin:0}li.dxp.dxp-nav-menu .sub-nav-child-container{margin-top:1.125rem;display:none;-ms-flex-direction:column-reverse;flex-direction:column-reverse}li.dxp.dxp-nav-menu.in+li{padding-top:0}li.dxp.dxp-nav-menu .nav-item{display:block;width:100%;height:auto;position:relative;padding:0;cursor:pointer}li.dxp.dxp-nav-menu .nav-item:before{content:\"\";display:block;position:absolute}\@media (min-width:992px){li.dxp.dxp-nav-menu{display:inline-block;padding:0}li.dxp.dxp-nav-menu:not(:first-of-type){margin-left:3.5rem}li.dxp.dxp-nav-menu dxp-nav-item-content{display:block}li.dxp.dxp-nav-menu dxp-nav-item-content:not(:last-child){margin-bottom:2.2rem}li.dxp.dxp-nav-menu.in .nav-item:focus{border:.0625rem solid transparent}li.dxp.dxp-nav-menu .nav-item:after{content:\"\";display:block;height:.0625rem;width:calc(100% + 1.3125rem)}li.dxp.dxp-nav-menu .sub-nav-child-container{position:absolute;width:100%;left:0;display:none;margin-top:7.375rem;opacity:0;-webkit-transition:opacity .3s;transition:opacity .3s;pointer-events:none}li.dxp.dxp-nav-menu .sub-nav-child-container.show{display:block}li.dxp.dxp-nav-menu .sub-nav-child-container.expanded{opacity:1;pointer-events:all}li.dxp.dxp-nav-menu .sub-nav-child-container .sub-nav-item{margin:0}li.dxp.dxp-nav-menu .dxp-scrollable{max-height:calc(100vh - 11.3rem)}li.dxp.dxp-nav-menu .dxp-scrollable ul{margin-bottom:0}}\@media screen and (min-width:992px) and (min-width:0\\0){li.dxp.dxp-nav-menu .dxp-scrollable{max-height:calc(100vh - 102px)}}\@media (max-width:991px){li.dxp.dxp-nav-menu.in .sub-nav-child-container{display:-ms-flexbox;display:flex;padding-left:16px}}\@media (max-width:767px){li.dxp.dxp-nav-menu.in .sub-nav-child-container{padding-left:8px}}li.dxp.dxp-nav-menu[dir=rtl].in .nav-item:before,li.dxp.dxp-nav-menu[dir=rtl] .nav-item:before{right:auto;left:0}\@media (min-width:992px){li.dxp.dxp-nav-menu[dir=rtl].in .nav-item:before,li.dxp.dxp-nav-menu[dir=rtl] .nav-item:before{right:auto;left:1.2rem}}\@media (max-width:991px){li.dxp.dxp-nav-menu[dir=rtl].in .sub-nav-child-container{display:-ms-flexbox;display:flex;padding-right:16px}}\@media (max-width:767px){li.dxp.dxp-nav-menu[dir=rtl].in .sub-nav-child-container{padding-right:8px}}"}};export{c as dxp_nav_menu};