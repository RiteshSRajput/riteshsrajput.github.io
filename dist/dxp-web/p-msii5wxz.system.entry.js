System.register(["./p-f4cc861d.system.js","./p-4b0c1219.system.js"],(function(e){"use strict";var t,i,a,s,n,r;return{setters:[function(e){t=e.r;i=e.c;a=e.d;s=e.h;n=e.g},function(e){r=e.B}],execute:function(){var l="numeric-range-slider";var h=e("dxp_range_slider",function(){function e(e){t(this,e);this.changeValue=i(this,"changeValue",7)}e.prototype.componentWillLoad=function(){this.base=new r(this,a);var e=this.range.replace("[","").replace("]","");this.minRangeValue=e.split("-")[0];this.maxRangeValue=e.split("-")[1]};e.prototype.componentDidLoad=function(){this.type===l?this.initMultiThumbSlider():this.initSingleThumbSlider()};e.prototype.routingHandler=function(e){this.base.routingEventListener(e)};e.prototype.commonInit=function(){this.innerBar=this.base.shadowRootQuerySelector(this.element,".inner-bar");this.trackBorderWidth=1;this.thumbWidth=24;this.thumbHeight=24;var e=this.type===l?80:150;var t=this.base.shadowRootQuerySelector(this.element,".slider-container");this.keyCode=Object.freeze({left:37,up:38,right:39,down:40});var i=this.element.parentElement;if(i&&window.getComputedStyle(i).getPropertyValue("width")){t.style.width=window.getComputedStyle(i).getPropertyValue("width");var a=parseInt(t.style.width,10);if(t.style.width.indexOf("rem")>=0||t.style.width.indexOf("em")>=0){a=parseInt(t.style.width,10)*16}var s=a-e;this.rangeSliderTrack.style.width=s.toString()+"px"}this.rangeSliderTrackWidth=parseInt(window.getComputedStyle(this.rangeSliderTrack).getPropertyValue("width").slice(0,-2),10);this.minThumbNode.addEventListener("keydown",this.handleKeyDown.bind(this));this.minThumbNode.addEventListener("mousedown",this.handleMouseDown.bind(this));this.minThumbNode.addEventListener("focus",this.handleFocus.bind(this));this.minThumbNode.addEventListener("blur",this.handleBlur.bind(this))};e.prototype.fillLowerTrackInnerBar=function(){this.innerBar.style.left="0px";this.innerBar.style.width=parseInt(this.minThumbNode.style.left,10)+1+"px"};e.prototype.fillMultipleThumbInnerBar=function(){this.innerBar.style.left=this.minThumbNode.style.left;this.innerBar.style.width=parseInt(this.maxThumbNode.style.left,10)-parseInt(this.minThumbNode.style.left,10)+"px"};e.prototype.handleBlur=function(e){var t=e.target.getAttribute("range-thumb");if(t==="min"){this.minThumbNode.classList.remove("focus")}else{this.maxThumbNode.classList.remove("focus")}this.rangeSliderTrack.classList.remove("focus")};e.prototype.handleFocus=function(e){var t=e.target.getAttribute("range-thumb");if(t==="min"){this.minThumbNode.classList.add("focus")}else{this.maxThumbNode.classList.add("focus")}this.rangeSliderTrack.classList.add("focus")};e.prototype.handleKeyDown=function(e){var t=false;var i=e.target.getAttribute("range-thumb");this.valueNow=i==="min"?parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10):parseInt(this.maxThumbNode.getAttribute("aria-valuenow"),10);switch(e.keyCode){case this.keyCode.left:case this.keyCode.down:i==="min"?this.moveSliderTo(this.valueNow-1,this.minThumbNode,"min"):this.moveSliderTo(this.valueNow-1,this.maxThumbNode,"max");t=true;break;case this.keyCode.right:case this.keyCode.up:i==="min"?this.moveSliderTo(this.valueNow+1,this.minThumbNode,"min"):this.moveSliderTo(this.valueNow+1,this.maxThumbNode,"max");t=true;break;default:break}if(t){e.preventDefault();e.stopPropagation()}};e.prototype.handleMouseDown=function(e){var t=this;var i=this;var a=e.target.getAttribute("range-thumb");var s=function(e){var t=e.pageX-i.rangeSliderTrack.offsetLeft;i.valueNow=parseInt(i.minRangeValue+(i.maxRangeValue-i.minRangeValue)*t/i.rangeSliderTrackWidth,10);if(a==="min"){i.moveSliderTo(i.valueNow,i.minThumbNode,"min")}else{i.moveSliderTo(i.valueNow,i.maxThumbNode,"max")}e.preventDefault();e.stopPropagation()};var n=function(){if(t.type===l){t.maxThumbNode.classList.remove("focus");var e=parseInt(t.minThumbNode.getAttribute("aria-valuenow"),10);var i=parseInt(t.maxThumbNode.getAttribute("aria-valuenow"),10);t.changeValue.emit({minValue:t.minRangeValue,maxValue:t.maxRangeValue,range:[e,i]})}else{var a=parseInt(t.minThumbNode.getAttribute("aria-valuenow"),10);t.changeValue.emit({minValue:t.minRangeValue,maxValue:t.maxRangeValue,currentValue:a})}t.minThumbNode.classList.remove("focus");t.rangeSliderTrack.classList.remove("focus");document.removeEventListener("mousemove",s);document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",s);document.addEventListener("mouseup",n);e.preventDefault();e.stopPropagation();if(a==="min"){i.minThumbNode.focus();i.minThumbNode.classList.add("focus")}else{i.maxThumbNode.focus();i.maxThumbNode.classList.add("focus")}};e.prototype.initMultiThumbSlider=function(){this.minThumbNode=this.base.shadowRootQuerySelector(this.element,"[range-thumb=min]");this.maxThumbNode=this.base.shadowRootQuerySelector(this.element,"[range-thumb=max]");this.rangeSliderTrack=this.base.shadowRootQuerySelector(this.element,".multi-range-slider");this.minValueNode=this.base.shadowRootQuerySelector(this.element,".min-value");this.maxValueNode=this.base.shadowRootQuerySelector(this.element,".max-value");this.minRangeValue=parseInt(this.minThumbNode.getAttribute("aria-valuemin"),10);this.maxRangeValue=parseInt(this.maxThumbNode.getAttribute("aria-valuemax"),10);this.commonInit();this.maxThumbNode.addEventListener("keydown",this.handleKeyDown.bind(this));this.maxThumbNode.addEventListener("mousedown",this.handleMouseDown.bind(this));this.maxThumbNode.addEventListener("focus",this.handleFocus.bind(this));this.maxThumbNode.addEventListener("blur",this.handleBlur.bind(this));this.valueNow=parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10);this.moveSliderTo(this.valueNow,this.minThumbNode,"min");this.valueNow=parseInt(this.maxThumbNode.getAttribute("aria-valuenow"),10);this.moveSliderTo(this.valueNow,this.maxThumbNode,"max")};e.prototype.initSingleThumbSlider=function(){this.minThumbNode=this.base.shadowRootQuerySelector(this.element,"[range-thumb=min]");this.rangeSliderTrack=this.base.shadowRootQuerySelector(this.element,".single-range-slider");this.minValueNode=this.base.shadowRootQuerySelector(this.element,".single-thumb-value");this.minRangeValue=parseInt(this.minThumbNode.getAttribute("aria-valuemin"),10);this.maxRangeValue=parseInt(this.minThumbNode.getAttribute("aria-valuemax"),10);if(this.rangeSliderTrack){this.rangeSliderTrackWidth=parseInt(window.getComputedStyle(this.rangeSliderTrack).getPropertyValue("width").slice(0,-2),10)}this.commonInit();this.valueNow=parseInt(this.minThumbNode.getAttribute("aria-valuenow"),10);this.moveSliderTo(this.valueNow,this.minThumbNode,"min")};e.prototype.moveSliderTo=function(e,t,i){var a=parseInt(t.getAttribute("aria-valuemax"),10);var s=parseInt(t.getAttribute("aria-valuemin"),10);if(e>a){e=a}if(e<s){e=s}this.valueNow=e;t.setAttribute("aria-valuenow",this.valueNow);t.setAttribute("aria-valuetext",this.valueNow);if(this.type===l){var n=Math.round((e-this.minRangeValue)*(this.rangeSliderTrackWidth-2*(this.thumbWidth-this.trackBorderWidth))/(this.maxRangeValue-this.minRangeValue));if(i==="min"){this.maxThumbNode.setAttribute("aria-valuemin",this.valueNow.toString());t.style.left=n-this.trackBorderWidth+"px";this.minValueNode.innerHTML=this.valueNow.toString()}else{this.minThumbNode.setAttribute("aria-valuemax",this.valueNow.toString());t.style.left=n+this.thumbWidth-this.trackBorderWidth+"px";this.maxValueNode.innerHTML=this.valueNow.toString()}this.fillMultipleThumbInnerBar()}else{var n=Math.round(this.valueNow*this.rangeSliderTrackWidth/(this.maxRangeValue-this.minRangeValue))-this.thumbWidth/2;t.style.left=n+"px";if(this.minValueNode){this.minValueNode.innerHTML=this.valueNow.toString()}this.fillLowerTrackInnerBar()}};e.prototype.render=function(){a.log.debug(this.element.tagName,"render()","in dxp-range-selector render() : "+"DEVELOPMENT");var e=[s("link",{rel:"stylesheet",href:""}),[this.theme&&s("link",{rel:"stylesheet",href:""})],[this.theme&&s("link",{rel:"stylesheet",href:a.config.get("DXP_STYLE_BASE_URL")+"/themes/"+this.theme+"/dxp-range-slider.min.css"})]];return s("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},e,s("div",{class:"slider-container"},this.type==="single-value-slider"&&s("div",{class:"single-range-slider-wrapper aria-widget-slider"},s("div",{class:"single-thumb-min-value"},this.minRangeValue),s("div",{class:"track single-range-slider"},s("div",{class:"inner-bar single-thumb-inner-bar"}),s("div",{"range-thumb":"min",role:"slider",tabindex:"0",class:"min thumb slider-thumb","aria-valuemin":this.minRangeValue,"aria-valuenow":this.value,"aria-valuetext":this.value,"aria-valuemax":this.maxRangeValue,"aria-label":this.accessibilityText})),s("div",{class:"single-thumb-max-value"},this.maxRangeValue),s("div",{class:"track-label thumb-current-value-wrapper"},s("span",{class:"single-thumb-value"},"0"))),this.type===l&&s("div",{class:"multi-range-slider-wrapper aria-widget-slider"},s("div",{class:"track-label min-value"},"0"),s("div",{class:"track multi-range-slider"},s("div",{class:"inner-bar"}),s("div",{"range-thumb":"min",role:"slider",tabindex:"0",class:"min thumb slider-thumb","aria-valuemin":this.minRangeValue,"aria-valuenow":this.minValue,"aria-valuetext":this.minValue,"aria-valuemax":this.maxRangeValue,"aria-label":this.accessibilityText}),s("div",{"range-thumb":"max",role:"slider",tabindex:"0",class:"max thumb slider-thumb","aria-valuemin":this.minRangeValue,"aria-valuenow":this.maxValue,"aria-valuetext":this.maxValue,"aria-valuemax":this.maxRangeValue,"aria-label":this.accessibilityText})),s("div",{class:"track-label max-value"},"0"))))};Object.defineProperty(e.prototype,"element",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"div.dxp.dxp-range-slider .slider-container{height:30px;margin-top:12px}div.dxp.dxp-range-slider .slider-container .aria-widget-slider{height:100%}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .track{border:none;position:relative;height:4px;border-radius:2px;float:left}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .slider-thumb[role=slider]{position:absolute;padding:0;margin:0;top:-.4375rem;width:1.5rem;height:1.5rem;border-radius:50%;margin-top:-.25rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .min-value{width:2rem;padding-right:1rem;float:left;position:relative;top:-.5rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .max-value{width:2rem;padding-left:1rem;float:left;position:relative;top:-.5rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .single-thumb-min-value{position:relative;top:-.5rem;width:2rem;padding-right:1rem;float:left}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .single-thumb-max-value{position:relative;top:-.5rem;width:2rem;float:left;padding-left:1rem}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .inner-bar{position:absolute;height:4px}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .single-thumb-inner-bar{border-radius:2px}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .thumb-current-value-wrapper{position:relative;top:-.7rem;float:left;margin-left:2rem;width:3rem;height:2rem;border-radius:1rem;text-align:center;vertical-align:middle}div.dxp.dxp-range-slider .slider-container .aria-widget-slider .thumb-current-value-wrapper .single-thumb-value{vertical-align:middle}"},enumerable:true,configurable:true});return e}())}}}));